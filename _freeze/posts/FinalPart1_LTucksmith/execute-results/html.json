{
  "hash": "ac854066dd11a1c808812b7311a8cbe8",
  "result": {
    "markdown": "---\ntitle: \"FinalPart1\"\nauthor: \"Liam Tucksmith\"\ndesription: \"FinalPart1\"\ndate: \"03/12/2023\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - finalpart1\n  - Liam Tucksmith\n  - tidyverse\n  - readxl\n  - ggplot2\n  - dplyr\n  - tidyr\n  - janitor\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(readxl)\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(janitor)\nknitr::opts_chunk$set(echo = TRUE)\n```\n:::\n\n\nThe most profitable sports league in the world, the National Football League, generated $18 billion in revenue in 2021 according to sportico.com. This total represents national media rights, league sponsorships with gambling companies, news outlets, and other companies, and shared revenue and royalties from the league’s various affiliates and subsidiaries, such as NFL Enterprises, NFL Properties, and NFL International. While the 32 teams which make up the NFL have separate revenue streams stemming from merchandise and ticketing sales and various other endeavors, each team also receives a slice of shared revenue from the NFL from the games' national and local broadcasts and sponsorships. As money is what keeps the NFL afloat and allows teams to competitively pay for top players and coaches, NFL teams benefit from working with media outlets and appearing in media and news. What I plan to analyze is how the relationship between the NFL and media plays out in games, if it does at all. Can the relationship between media and game outcome be measured? Does a team's weekly media attention share affect their weekly game outcome? My analysis will attempt to measure this relationship by comparing Google Trends generated News Interest Over Time scores for the 2020-21 and 2021-22 for each match up that occurred in those two seasons. \n\nMy hypothesis is that the highest scored weeks for each team will generate the highest probability of winning that same or next given week. In addition, I plan to analyze how the relationship between the media and game scores changes given the media score of the opposition team, and if the relationship between the media scores and the sports betting data differs from that of the media scores and game outcome. I hypothesize that the team with the higher media score will be favored and that the spread will widen if the individual media score is above a to be determined .\n\nThe first dataset is a collection of all the matchups and scores that occurred in the NFL since 1966. The matchup information includes the names of the two teams competing, home/away team status, the match site, the weather on game day, and the final score for each team. Sports betting data for each game since 1977 is also included, and includes who was favored, the point spread, and the over/under line. The dataset is from https://www.kaggle.com/datasets/tobycrabtree/nfl-scores-and-betting-data and was created from a variety of sources including games and scores from public websites such as ESPN, NFL.com, and Pro Football Reference. Weather information is from NOAA data, cross-referenced with NFLweather.com. Betting data reflects lines available at sportsline.com and aussportsbetting.com. For the analysis, I will limit the data to the data collected from the 2020-21 and 2021-22 seasons. \n\n::: {.cell}\n\n```{.r .cell-code}\ngame_scores <- read.csv(\"~/Documents/GitHub/603_Spring_2023/posts/_data/spreadspoke_scores.csv\")\ncolnames(game_scores)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"schedule_date\"       \"schedule_season\"     \"schedule_week\"      \n [4] \"schedule_playoff\"    \"team_home\"           \"score_home\"         \n [7] \"score_away\"          \"team_away\"           \"team_favorite_id\"   \n[10] \"spread_favorite\"     \"over_under_line\"     \"stadium\"            \n[13] \"stadium_neutral\"     \"weather_temperature\" \"weather_wind_mph\"   \n[16] \"weather_humidity\"    \"weather_detail\"     \n```\n:::\n\n```{.r .cell-code}\ngame_scores <- game_scores[game_scores$schedule_season == 2021 | game_scores$schedule_season == 2022, ]\nsummary(game_scores)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n schedule_date      schedule_season schedule_week      schedule_playoff\n Length:569         Min.   :2021    Length:569         Mode :logical   \n Class :character   1st Qu.:2021    Class :character   FALSE:543       \n Mode  :character   Median :2021    Mode  :character   TRUE :26        \n                    Mean   :2021                                       \n                    3rd Qu.:2022                                       \n                    Max.   :2022                                       \n                                                                       \n  team_home           score_home      score_away     team_away        \n Length:569         Min.   : 0.00   Min.   : 0.00   Length:569        \n Class :character   1st Qu.:17.00   1st Qu.:15.00   Class :character  \n Mode  :character   Median :23.00   Median :21.00   Mode  :character  \n                    Mean   :23.53   Mean   :21.52                     \n                    3rd Qu.:30.00   3rd Qu.:28.00                     \n                    Max.   :56.00   Max.   :51.00                     \n                                                                      \n team_favorite_id   spread_favorite   over_under_line   stadium         \n Length:569         Min.   :-20.000   Min.   :32.00   Length:569        \n Class :character   1st Qu.: -7.000   1st Qu.:42.00   Class :character  \n Mode  :character   Median : -4.000   Median :45.00   Mode  :character  \n                    Mean   : -5.452   Mean   :45.33                     \n                    3rd Qu.: -3.000   3rd Qu.:48.00                     \n                    Max.   : -1.000   Max.   :58.50                     \n                                                                        \n stadium_neutral weather_temperature weather_wind_mph weather_humidity\n Mode :logical   Min.   : 7.00       Min.   : 0.000   Min.   :  8.00  \n FALSE:558       1st Qu.:72.00       1st Qu.: 0.000   1st Qu.: 52.50  \n TRUE :11        Median :72.00       Median : 0.000   Median : 64.00  \n                 Mean   :64.57       Mean   : 2.411   Mean   : 66.11  \n                 3rd Qu.:72.00       3rd Qu.: 0.000   3rd Qu.: 81.00  \n                 Max.   :82.00       Max.   :33.000   Max.   :100.00  \n                 NA's   :334         NA's   :333      NA's   :506     \n weather_detail    \n Length:569        \n Class :character  \n Mode  :character  \n                   \n                   \n                   \n                   \n```\n:::\n\n```{.r .cell-code}\nglimpse(game_scores)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 569\nColumns: 17\n$ schedule_date       <chr> \"9/9/2021\", \"9/12/2021\", \"9/12/2021\", \"9/12/2021\",…\n$ schedule_season     <int> 2021, 2021, 2021, 2021, 2021, 2021, 2021, 2021, 20…\n$ schedule_week       <chr> \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", …\n$ schedule_playoff    <lgl> FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, F…\n$ team_home           <chr> \"Tampa Bay Buccaneers\", \"Atlanta Falcons\", \"Buffal…\n$ score_home          <int> 31, 6, 16, 19, 27, 33, 37, 16, 33, 34, 16, 38, 13,…\n$ score_away          <int> 29, 32, 23, 14, 24, 41, 21, 28, 29, 14, 17, 3, 27,…\n$ team_away           <chr> \"Dallas Cowboys\", \"Philadelphia Eagles\", \"Pittsbur…\n$ team_favorite_id    <chr> \"TB\", \"ATL\", \"BUF\", \"CAR\", \"MIN\", \"SF\", \"JAX\", \"SE…\n$ spread_favorite     <dbl> -7.5, -3.5, -6.5, -5.0, -3.0, -7.5, -3.0, -2.5, -6…\n$ over_under_line     <dbl> 51.5, 48.0, 48.5, 44.5, 48.0, 46.0, 44.5, 48.5, 53…\n$ stadium             <chr> \"Raymond James Stadium\", \"Mercedes-Benz Stadium\", …\n$ stadium_neutral     <lgl> FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, F…\n$ weather_temperature <int> NA, 72, NA, NA, NA, 72, 72, 72, NA, 72, NA, NA, NA…\n$ weather_wind_mph    <int> NA, 0, NA, NA, NA, 0, 0, 0, NA, 0, NA, NA, NA, NA,…\n$ weather_humidity    <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…\n$ weather_detail      <chr> \"\", \"indoor\", \"\", \"\", \"\", \"indoor\", \"indoor\", \"ind…\n```\n:::\n:::\n\nThe second dataset I will use is a combination of data from Google Trends. To collect this data I pulled weekly \"News Search\" scores for each of the 32 NFL teams over the 2020-21 and 2021-22 season. To populate these scores, Google determines the week with the highest volume of News Searches within the time frame for each team and assigns it a score of 100. From there, the other weeks of the time frame get assigned their score to be the percentage of news search volume in proportion to the week scored as 100. For example, if week 7 was scored at 100 and week 3 had 30% of the news search volume that week 7 did, week 3's score would be 30.  \n\n\n::: {.cell}\n\n```{.r .cell-code}\n#import csv for each NFL team\ndf1 <- read.csv(\"~/Documents/GitHub/603_Spring_2023/posts/_data/multiTimeline.csv\")\ndf2 <- read.csv(\"~/Documents/GitHub/603_Spring_2023/posts/_data/multiTimeline (1).csv\")\ndf3 <- read.csv(\"~/Documents/GitHub/603_Spring_2023/posts/_data/multiTimeline (2).csv\")\ndf4 <- read.csv(\"~/Documents/GitHub/603_Spring_2023/posts/_data/multiTimeline (3).csv\")\ndf5 <- read.csv(\"~/Documents/GitHub/603_Spring_2023/posts/_data/multiTimeline (4).csv\")\ndf6 <- read.csv(\"~/Documents/GitHub/603_Spring_2023/posts/_data/multiTimeline (5).csv\")\ndf7 <- read.csv(\"~/Documents/GitHub/603_Spring_2023/posts/_data/multiTimeline (6).csv\")\ndf8 <- read.csv(\"~/Documents/GitHub/603_Spring_2023/posts/_data/multiTimeline (7).csv\")\ndf9 <- read.csv(\"~/Documents/GitHub/603_Spring_2023/posts/_data/multiTimeline (8).csv\")\ndf10 <- read.csv(\"~/Documents/GitHub/603_Spring_2023/posts/_data/multiTimeline (9).csv\")\ndf11 <- read.csv(\"~/Documents/GitHub/603_Spring_2023/posts/_data/multiTimeline (10).csv\")\ndf12 <- read.csv(\"~/Documents/GitHub/603_Spring_2023/posts/_data/multiTimeline (11).csv\")\ndf13 <- read.csv(\"~/Documents/GitHub/603_Spring_2023/posts/_data/multiTimeline (12).csv\")\ndf14 <- read.csv(\"~/Documents/GitHub/603_Spring_2023/posts/_data/multiTimeline (13).csv\")\ndf15 <- read.csv(\"~/Documents/GitHub/603_Spring_2023/posts/_data/multiTimeline (14).csv\")\ndf16 <- read.csv(\"~/Documents/GitHub/603_Spring_2023/posts/_data/multiTimeline (15).csv\")\ndf17 <- read.csv(\"~/Documents/GitHub/603_Spring_2023/posts/_data/multiTimeline (16).csv\")\ndf18 <- read.csv(\"~/Documents/GitHub/603_Spring_2023/posts/_data/multiTimeline (17).csv\")\ndf19 <- read.csv(\"~/Documents/GitHub/603_Spring_2023/posts/_data/multiTimeline (18).csv\")\ndf20 <- read.csv(\"~/Documents/GitHub/603_Spring_2023/posts/_data/multiTimeline (19).csv\")\ndf21 <- read.csv(\"~/Documents/GitHub/603_Spring_2023/posts/_data/multiTimeline (20).csv\")\ndf22 <- read.csv(\"~/Documents/GitHub/603_Spring_2023/posts/_data/multiTimeline (21).csv\")\ndf23 <- read.csv(\"~/Documents/GitHub/603_Spring_2023/posts/_data/multiTimeline (22).csv\")\ndf24 <- read.csv(\"~/Documents/GitHub/603_Spring_2023/posts/_data/multiTimeline (23).csv\")\ndf25 <- read.csv(\"~/Documents/GitHub/603_Spring_2023/posts/_data/multiTimeline (24).csv\")\ndf26 <- read.csv(\"~/Documents/GitHub/603_Spring_2023/posts/_data/multiTimeline (25).csv\")\ndf27 <- read.csv(\"~/Documents/GitHub/603_Spring_2023/posts/_data/multiTimeline (26).csv\")\ndf28 <- read.csv(\"~/Documents/GitHub/603_Spring_2023/posts/_data/multiTimeline (27).csv\")\ndf29 <- read.csv(\"~/Documents/GitHub/603_Spring_2023/posts/_data/multiTimeline (28).csv\")\ndf30 <- read.csv(\"~/Documents/GitHub/603_Spring_2023/posts/_data/multiTimeline (29).csv\")\ndf31 <- read.csv(\"~/Documents/GitHub/603_Spring_2023/posts/_data/multiTimeline (30).csv\")\ndf32 <- read.csv(\"~/Documents/GitHub/603_Spring_2023/posts/_data/multiTimeline (31).csv\")\n\n#bind columns to create one data frame that holds all the scores for each team\ntrend_scores <- bind_cols(df1,df2,df3,df4,df5,df6,df7,df8,df9,df10,df11,df12,df13,df14,df15,\n                          df16,df17,df18,df19,df20,df21,df22,df23,df24,df25,df26,df27,df28,df29,df30,df31,df32)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nNew names:\n* Category..All.categories -> Category..All.categories...1\n* Category..All.categories -> Category..All.categories...2\n* Category..All.categories -> Category..All.categories...3\n* Category..All.categories -> Category..All.categories...4\n* Category..All.categories -> Category..All.categories...5\n* ...\n```\n:::\n\n```{.r .cell-code}\n#create new column that holds the dates for each week, which R stored as the row names\ntrend_scores <- rownames_to_column(trend_scores, \"Week\")\n#rename column names to be row one values so that each column is the team name\ntrend_scores <- trend_scores %>% \n  row_to_names(row_number = 1)\nsummary(trend_scores)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n     Week           Tennessee Titans: (United States)\n Length:83          Length:83                        \n Class :character   Class :character                 \n Mode  :character   Mode  :character                 \n Jacksonville Jaguars: (United States) Philadelphia Eagles: (United States)\n Length:83                             Length:83                           \n Class :character                      Class :character                    \n Mode  :character                      Mode  :character                    \n Kansas City Chiefs: (United States) Chicago Bears: (United States)\n Length:83                           Length:83                     \n Class :character                    Class :character              \n Mode  :character                    Mode  :character              \n Green Bay Packers: (United States) San Francisco 49ers: (United States)\n Length:83                          Length:83                           \n Class :character                   Class :character                    \n Mode  :character                   Mode  :character                    \n Minnesota Vikings: (United States) New York Giants: (United States)\n Length:83                          Length:83                       \n Class :character                   Class :character                \n Mode  :character                   Mode  :character                \n Las Vegas Raiders: (United States) Buffalo Bills: (United States)\n Length:83                          Length:83                     \n Class :character                   Class :character              \n Mode  :character                   Mode  :character              \n New England Patriots: (United States) Carolina Panthers: (United States)\n Length:83                             Length:83                         \n Class :character                      Class :character                  \n Mode  :character                      Mode  :character                  \n Miami Dolphins: (United States) Seattle Seahawks: (United States)\n Length:83                       Length:83                        \n Class :character                Class :character                 \n Mode  :character                Mode  :character                 \n Detroit Lions: (United States) Cincinnati Bengals: (United States)\n Length:83                      Length:83                          \n Class :character               Class :character                   \n Mode  :character               Mode  :character                   \n New Orleans Saints: (United States) Denver Broncos: (United States)\n Length:83                           Length:83                      \n Class :character                    Class :character               \n Mode  :character                    Mode  :character               \n Baltimore Ravens: (United States) New York Jets: (United States)\n Length:83                         Length:83                     \n Class :character                  Class :character              \n Mode  :character                  Mode  :character              \n Washington Commanders: (United States) Houston Texans: (United States)\n Length:83                              Length:83                      \n Class :character                       Class :character               \n Mode  :character                       Mode  :character               \n Tampa Bay Buccaneers: (United States) Indianapolis Colts: (United States)\n Length:83                             Length:83                          \n Class :character                      Class :character                   \n Mode  :character                      Mode  :character                   \n Cleveland Browns: (United States) Arizona Cardinals: (United States)\n Length:83                         Length:83                         \n Class :character                  Class :character                  \n Mode  :character                  Mode  :character                  \n Los Angeles Chargers: (United States) Los Angeles Rams: (United States)\n Length:83                             Length:83                        \n Class :character                      Class :character                 \n Mode  :character                      Mode  :character                 \n Atlanta Falcons: (United States) Dallas Cowboys: (United States)\n Length:83                        Length:83                      \n Class :character                 Class :character               \n Mode  :character                 Mode  :character               \n Pittsburgh Steelers: (United States)\n Length:83                           \n Class :character                    \n Mode  :character                    \n```\n:::\n\n```{.r .cell-code}\nglimpse(trend_scores)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 83\nColumns: 33\n$ Week                                     <chr> \"2021-08-01\", \"2021-08-08\", \"…\n$ `Tennessee Titans: (United States)`      <chr> \"12\", \"29\", \"32\", \"41\", \"37\",…\n$ `Jacksonville Jaguars: (United States)`  <chr> \"10\", \"14\", \"17\", \"24\", \"16\",…\n$ `Philadelphia Eagles: (United States)`   <chr> \"17\", \"19\", \"15\", \"18\", \"16\",…\n$ `Kansas City Chiefs: (United States)`    <chr> \"6\", \"4\", \"14\", \"7\", \"10\", \"1…\n$ `Chicago Bears: (United States)`         <chr> \"15\", \"26\", \"30\", \"21\", \"46\",…\n$ `Green Bay Packers: (United States)`     <chr> \"21\", \"18\", \"22\", \"17\", \"33\",…\n$ `San Francisco 49ers: (United States)`   <chr> \"11\", \"9\", \"18\", \"26\", \"31\", …\n$ `Minnesota Vikings: (United States)`     <chr> \"30\", \"29\", \"38\", \"36\", \"60\",…\n$ `New York Giants: (United States)`       <chr> \"18\", \"42\", \"31\", \"30\", \"54\",…\n$ `Las Vegas Raiders: (United States)`     <chr> \"15\", \"22\", \"39\", \"15\", \"46\",…\n$ `Buffalo Bills: (United States)`         <chr> \"2\", \"1\", \"1\", \"2\", \"3\", \"3\",…\n$ `New England Patriots: (United States)`  <chr> \"30\", \"26\", \"38\", \"32\", \"92\",…\n$ `Carolina Panthers: (United States)`     <chr> \"9\", \"20\", \"57\", \"38\", \"48\", …\n$ `Miami Dolphins: (United States)`        <chr> \"13\", \"22\", \"27\", \"19\", \"45\",…\n$ `Seattle Seahawks: (United States)`      <chr> \"22\", \"19\", \"19\", \"22\", \"28\",…\n$ `Detroit Lions: (United States)`         <chr> \"33\", \"32\", \"42\", \"39\", \"51\",…\n$ `Cincinnati Bengals: (United States)`    <chr> \"0\", \"1\", \"3\", \"4\", \"0\", \"2\",…\n$ `New Orleans Saints: (United States)`    <chr> \"26\", \"24\", \"23\", \"59\", \"46\",…\n$ `Denver Broncos: (United States)`        <chr> \"27\", \"34\", \"23\", \"33\", \"40\",…\n$ `Baltimore Ravens: (United States)`      <chr> \"6\", \"25\", \"47\", \"18\", \"70\", …\n$ `New York Jets: (United States)`         <chr> \"18\", \"29\", \"57\", \"29\", \"52\",…\n$ `Washington Commanders: (United States)` <chr> \"12\", \"31\", \"20\", \"40\", \"42\",…\n$ `Houston Texans: (United States)`        <chr> \"41\", \"48\", \"90\", \"12\", \"70\",…\n$ `Tampa Bay Buccaneers: (United States)`  <chr> \"7\", \"8\", \"18\", \"8\", \"29\", \"5…\n$ `Indianapolis Colts: (United States)`    <chr> \"14\", \"45\", \"37\", \"16\", \"42\",…\n$ `Cleveland Browns: (United States)`      <chr> \"18\", \"14\", \"18\", \"20\", \"24\",…\n$ `Arizona Cardinals: (United States)`     <chr> \"19\", \"11\", \"0\", \"26\", \"21\", …\n$ `Los Angeles Chargers: (United States)`  <chr> \"3\", \"14\", \"4\", \"32\", \"8\", \"1…\n$ `Los Angeles Rams: (United States)`      <chr> \"4\", \"8\", \"11\", \"12\", \"10\", \"…\n$ `Atlanta Falcons: (United States)`       <chr> \"10\", \"47\", \"19\", \"33\", \"56\",…\n$ `Dallas Cowboys: (United States)`        <chr> \"26\", \"20\", \"24\", \"20\", \"42\",…\n$ `Pittsburgh Steelers: (United States)`   <chr> \"26\", \"23\", \"25\", \"31\", \"45\",…\n```\n:::\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}