{
  "hash": "17cb3ec8762441eb9ba077a09161854d",
  "result": {
    "markdown": "---\ntitle: \"Final Project check-in 2\"\nauthor: \"Diana Rinker\"\ndescription: \"Final project DACSS 603\"\ndate: \"4/24/2023\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\neditor: \n  markdown: \n    wrap: 72\n---\n\n\n## DACSS 603, spring 2023\n\n## Final Project check-in 2, Diana Rinker.\n\n# Introduction. Online engagement\n\nIt is well known that online engagement and popularity with the web\nresource is a highly valuable metric and is driving site revenue. This\nresearch project is exploring which factors contribute to users online\nengagement.\n\nTo do that I will use the data of an online blog on the news website.\nThe author of this blog is posting articles about interpersonal\nrelationships every work day (Mon- Fri). The posts are formulated as a\nletter from a reader with the situation and a question about\nrelationships. The author gives an advice about the situation. Website\nreaders are free to comment under each post, but cannot make their own\nposts.\n\nAll post methadata and comments are public. They are saved by the\nwebsite and available for the analysis. Using this data set, I will\nexplore how readers' engagement connected with blogs's author\nengagement, site comments', web source of readers and negative behaviors\nonline.\n\nMy research question is: Does the authors engagement in the conversation\naround the post makes readers more engaged and promotes positive\ninteractions among them?\n\n**DV:** My dependent construct is **\"user's engagement**\", I will\nmeasure users' engagement at the level of individual post, using the\nfollowing metrics:\n\n1.  Page views\n2.  Page visits (one visit can contain a few views, if the person visits\n    other pages on the site)\n3.  Unique users. One person can visit the same page a few times (it is\n    calculated for all time since the page was posted).\n4.  Number of votes: \"thums up\" or \"thumbs down\"\n5.  Number of comments\n6.  Exit rate or \"bounces\". When the visitor is coming to the page and\n    then leaving, i.e. not opening other pages on this website.\n\nL2 - page readers \\* Reveal letter \\* Reveal comments\n\n**IV:** My main independent variable is **Blog's author engagement.** I\nwill measure authors engagement as the factor variable, with the\nfollowing levels:\n\nA. Unspecified comment\n\nB. Featured comment\n\nC. Engagement in conversation\n\nTo control for **confounders,** I will also measure the follwing\nvariables:\n\n1.  Topic of the post (\"post tag\"), categorical variable.\n\n2.  Source of the readers, also categorical variable.\n\n3.  Mood of the conversation , derivative continuous variable calculated\n    as the ratio of \"likes\" to \"dislikes\".\n\n4.  Blocked and flagged comments.\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'dplyr'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nâ”€â”€ Attaching packages â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tidyverse 1.3.2 â”€â”€\nâœ” tibble  3.1.8     âœ” purrr   1.0.1\nâœ” tidyr   1.3.0     âœ” stringr 1.5.0\nâœ” readr   2.1.4     âœ” forcats 1.0.0\nâ”€â”€ Conflicts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tidyverse_conflicts() â”€â”€\nâœ– dplyr::filter() masks stats::filter()\nâœ– dplyr::lag()    masks stats::lag()\n```\n:::\n:::\n\n\n### Data source and description. \n\nTo answer my research question I will use two datasets. the first data\nset has information about all comments associated with each post by post\nID. The second data set is analytics data for the web bage. It contains\none post per row and variables describe each post as a whole without\nbreaking down to the comment level.\n\nIn this project I will analyze posts for January 2021 - February 2023.\nHere is the list of variables in each dataset: \nPost-level data:\n\n::: {.cell}\n\n```{.r .cell-code}\ngetwd()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"C:/Users/Diana/OneDrive - University Of Massachusetts Medical School/Documents/R/R working directory/DACSS/603/603_Spring_2023/posts\"\n```\n:::\n\n```{.r .cell-code}\n# First, I will load the data set with the comment level data:\nraw <- as_tibble (read_csv(\"C:\\\\Users\\\\Diana\\\\OneDrive - University Of Massachusetts Medical School\\\\Documents\\\\R\\\\R working directory\\\\DACSS\\\\603\\\\my study files for dacss603\\\\globe\\\\ data.2021.plus.csv\"))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 105136 Columns: 17\nâ”€â”€ Column specification â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nDelimiter: \",\"\nchr  (6): content, user_name, display_name, image_url, email, approved\ndbl  (7): message_id, post_id, user_id, parent, absolute_likes, absolute_dis...\nlgl  (3): email_verified, created_at, private_profile\ndttm (1): written_at\n\nâ„¹ Use `spec()` to retrieve the full column specification for this data.\nâ„¹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n```{.r .cell-code}\ncomments.data<-raw \ncolnames (comments.data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"content\"           \"message_id\"        \"post_id\"          \n [4] \"user_id\"           \"user_name\"         \"display_name\"     \n [7] \"image_url\"         \"email\"             \"email_verified\"   \n[10] \"created_at\"        \"private_profile\"   \"approved\"         \n[13] \"written_at\"        \"parent\"            \"absolute_likes\"   \n[16] \"absolute_dislikes\" \"comment.year\"     \n```\n:::\n\n```{.r .cell-code}\nhead(comments.data$written_at)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"2021-01-01 08:28:44 UTC\" \"2021-01-01 08:57:08 UTC\"\n[3] \"2021-01-01 10:36:58 UTC\" \"2021-01-01 11:13:13 UTC\"\n[5] \"2021-01-01 12:27:44 UTC\" \"2021-01-01 12:51:48 UTC\"\n```\n:::\n\n```{.r .cell-code}\ncomments.data <-comments.data%>%\n              mutate(com.year = format(written_at,format = \"%Y\" ))\n# range(comments.data$com.year)\n# dim(comments.data)\nstr(comments.data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\ntibble [105,136 Ã— 18] (S3: tbl_df/tbl/data.frame)\n $ content          : chr [1:105136] \"08:15  Dawn of the 21st year of the 21st century<br/>&quot;21st Century Schizoid Man&quot;  on the BOSE\" \"Liz:  ðŸ˜„\" \"Happy New Year to all y'all. And Ms. G, thank you for letting me play for another year playing in your sandbox.\" \"Blog needs a new name - Hate Letters\" ...\n $ message_id       : num [1:105136] 1.15e+08 1.15e+08 1.15e+08 1.15e+08 1.15e+08 ...\n $ post_id          : num [1:105136] 27071015 27071015 27071009 27071009 27071009 ...\n $ user_id          : num [1:105136] 2889100 1855822 5133556 5156343 5560421 ...\n $ user_name        : chr [1:105136] \"Lefty49\" \"JacquiSmith\" \"Bzznlike-crazyman\" \"--SnowMan--\" ...\n $ display_name     : chr [1:105136] \"Lefty49\" \"JacquiSmith\" \"Bzznlike-crazyman\" \"--SnowMan--\" ...\n $ image_url        : chr [1:105136] \"https://u.o0bc.com/avatars/48/121/77/5077296.png?35\" \"https://u.o0bc.com/avatars/41/194/84/5554729.png?47\" \"https://u.o0bc.com/avatars/85/175/84/5549909.png?9\" \"https://u.o0bc.com/avatars/64/191/84/5553984.png?5\" ...\n $ email            : chr [1:105136] \"danwalker1949@aol.com\" \"amcr1124@comcast.net\" \"eflynn105@yahoo.com\" \"markedoc@yahoo.com\" ...\n $ email_verified   : logi [1:105136] FALSE FALSE FALSE FALSE FALSE FALSE ...\n $ created_at       : logi [1:105136] NA NA NA NA NA NA ...\n $ private_profile  : logi [1:105136] FALSE FALSE FALSE FALSE FALSE FALSE ...\n $ approved         : chr [1:105136] \"approved\" \"approved\" \"approved\" \"approved\" ...\n $ written_at       : POSIXct[1:105136], format: \"2021-01-01 08:28:44\" \"2021-01-01 08:57:08\" ...\n $ parent           : num [1:105136] NA 1.15e+08 NA NA 1.15e+08 ...\n $ absolute_likes   : num [1:105136] 2 0 14 7 7 7 4 3 2 4 ...\n $ absolute_dislikes: num [1:105136] 1 0 1 0 1 1 1 1 1 0 ...\n $ comment.year     : num [1:105136] 2021 2021 2021 2021 2021 ...\n $ com.year         : chr [1:105136] \"2021\" \"2021\" \"2021\" \"2021\" ...\n```\n:::\n:::\n\nComment data: \n\n::: {.cell}\n\n```{.r .cell-code}\n# Second, loadng post-level data :\nmerged <- as_tibble (read_csv(\"C:\\\\Users\\\\Diana\\\\OneDrive - University Of Massachusetts Medical School\\\\Documents\\\\R\\\\R working directory\\\\DACSS\\\\603\\\\my study files for dacss603\\\\globe\\\\data.merged.csv\"))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 535 Columns: 23\nâ”€â”€ Column specification â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nDelimiter: \",\"\nchr   (3): Letter, Exit rate, post.month\ndbl  (18): Page views, Search + amp referral visits, Direct (non-email) refe...\nnum   (1): Visits when post was on LL HP\ndate  (1): post.date\n\nâ„¹ Use `spec()` to retrieve the full column specification for this data.\nâ„¹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n```{.r .cell-code}\n# colnames(merged)\nstr(merged)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\ntibble [535 Ã— 23] (S3: tbl_df/tbl/data.frame)\n $ post.date                         : Date[1:535], format: \"2021-01-04\" \"2021-01-05\" ...\n $ Letter                            : chr [1:535] \"love letters | blog | I don&'t want him to let me go\" \"love letters | blog | Should I be working to get her back?\" \"love letters | blog | I&'m sick of thinking about the breakup\" \"love letters | blog | I don&'t want to be selfish about 2020 Christmas\" ...\n $ Page views                        : num [1:535] 14830 12067 11921 12817 12866 ...\n $ Search + amp referral visits      : num [1:535] 1005 822 793 765 934 ...\n $ Direct (non-email) referral visits: num [1:535] 10005 7948 7997 8746 8400 ...\n $ Visits                            : num [1:535] 12998 10391 10331 11040 10818 ...\n $ Uniques                           : num [1:535] 11453 8985 8917 9662 8564 ...\n $ Other website referral visits     : num [1:535] 129 232 106 152 139 153 165 157 85 151 ...\n $ Social referral visits            : num [1:535] 457 94 156 106 113 368 90 171 84 129 ...\n $ BDC referral visits               : num [1:535] 7087 5312 5185 5901 4570 ...\n $ Visits when post was on LL HP     : num [1:535] 3167 3323 2929 3056 4795 ...\n $ Exits                             : num [1:535] 9679 7549 7613 8188 7900 ...\n $ Exit rate                         : chr [1:535] \"74%\" \"73%\" \"74%\" \"74%\" ...\n $ dup                               : num [1:535] 0 0 0 0 0 0 0 0 0 0 ...\n $ post_id                           : num [1:535] 27071003 27070997 27070991 27070985 27070979 ...\n $ n.comments                        : num [1:535] 267 207 266 372 319 267 337 154 179 375 ...\n $ post.year                         : num [1:535] 2021 2021 2021 2021 2021 ...\n $ post.month                        : chr [1:535] \"01\" \"01\" \"01\" \"01\" ...\n $ post.likes                        : num [1:535] 1440 864 936 1497 1145 ...\n $ post.dislikes                     : num [1:535] 72 106 96 520 154 188 150 62 106 150 ...\n $ post.total.likes                  : num [1:535] 1512 970 1032 2017 1299 ...\n $ blocked.sum                       : num [1:535] 1 2 3 9 2 3 4 0 3 3 ...\n $ pct.positive                      : num [1:535] 95.2 89.1 90.7 74.2 88.1 ...\n```\n:::\n:::\n\n\nBe\n\nTo begin, I will review available variables and evaluate whether it is a\ngood measure for this study.\n\n# 1.DV: popularity and engagement. \n## 1.1.Popularity\n\n### Page views\n\nThis is the most general metric, representing how many views the post\nreceived. Views do not distinguish repeated views by the same person.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# str(merged)\nggplot(data=merged, mapping=aes(x=`Page views`))+\n  geom_histogram()\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n```\n:::\n\n::: {.cell-output-display}\n![](Final_Project_check_in_2_Diana_Rinker_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nmerged$post.month <-as.numeric(merged$post.month)\nmerged$year_month <- paste0(merged$post.year, \"-\", sprintf(\"%02d\", merged$post.month))\n\nggplot( data=merged, mapping=aes(y=`Page views`, x=year_month))+\n          geom_boxplot()+\n  labs(title=\"Number of post wiews per month\", x=\"Month\", y=\"Number of vews\")+ \n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](Final_Project_check_in_2_Diana_Rinker_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# ggplot(data=merged, mapping=aes(x=log(`Page views`)))+\n#   geom_histogram()\n```\n:::\n\n\nFrom this graph we can see that the numbers of views is increased over\ntime. To get a better understanding of it, lets review other metrics.\n\n### Page visits and unique users\n\nVisit is an instance of a user engaging with bdc website. The user can\nvisit a few pages of the site and re-visit them, creaing few views in\nonce visit.Once th user left the website, the visit is over.\n\nThere also can be many visits by the same viewer. To account for\nrepeated users there is \"Uniques\" variable. It tells us how many unique\nusers saw the post. The relationship will always be that\n\nUniques \\< Visits \\< Views\n\nLets plot them together:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# str(merged)\nggplot(merged, aes(x =post.date )) +\n     geom_bar(aes(y = `Page views`, fill = \"Page views\"), stat = \"identity\", position = \"dodge\", width = 0.6) +\n     geom_bar(aes(y = Visits, fill = \"Visits\"), stat = \"identity\", position = \"dodge\", width = 0.6) +\n     geom_bar(aes(y = Uniques, fill = \"Unique users\"), stat = \"identity\", position = \"dodge\", width = 0.6)    +\n     labs(title = \"Views, visits and unique users per month\", x = \"Post.date\", y = \"Value\") + \n     theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](Final_Project_check_in_2_Diana_Rinker_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\nThis graph also shows increase in all three metrics in 2022-2023. To see\nhow these metrics crrespond to each other, I will calculate \"visits\nratio\" and \"unique.ratio\".\n\n### Page unique viewers.\n\nBecuse \"Uniques\" variable represents number of unique people who came to\nthe page and viewed it at least once, his metric represents popularity\nof the post. It's distribution shows us that not all posts are equally\npopular:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# colnames(merged)\nggplot(data=merged, mapping=aes(x=Uniques))+\n  geom_histogram()\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n```\n:::\n\n::: {.cell-output-display}\n![](Final_Project_check_in_2_Diana_Rinker_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\nWe can see a long tail on the right, showing that there is a number of\nposts who are way more popular. If we look at the distribution of this\nvariable over time, we will see significant increase of average\npopularity after December 2021.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot( data=merged, mapping=aes(y=Uniques, x=merged$year_month))+\n          geom_boxplot()+\n  labs(title=\"Number of unique viewers per month\", x=\"Month\", y=\"Number of unique viewers\")+ \n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Use of `merged$year_month` is discouraged.\nâ„¹ Use `year_month` instead.\n```\n:::\n\n::: {.cell-output-display}\n![](Final_Project_check_in_2_Diana_Rinker_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n## 1.2. Engagement metrics:\n\n### Visit ratio and unique ratio:\n\n\"visits ratio\" is the number of visits per total views. This metric\ntells us how often the page being re-viewed. The lower the ratio means\nthat the page was viewed more times during single visit. Since repeated\nview can be considered a higher engagement, the lower visit ratio\nindicates higher engagement.\n\n\"unique ratio\" - number of unique users per total views. It is telling\nus how often the same person re-visited the post. Lower ratio indicates\nrepeated users, therefore higher engagement.\n\nBoth ratios are always in the range of 0 - 1.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n  merged <- merged %>%\n     mutate(uniques.ratio = Uniques / `Page views`)%>%\n      mutate(visits.ratio = Visits / `Page views`)\n# str(merged)\n\n     ggplot(merged, aes( y = uniques.ratio, x =post.date, )) +\n          geom_point(color =\"green\" )    +\n          labs(title = \"Unique.ratio per post \", x = \"Post.date\", y = \"Value\") + \n          theme(axis.text.x = element_text(angle = 45, hjust = 1))  \n```\n\n::: {.cell-output-display}\n![](Final_Project_check_in_2_Diana_Rinker_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n\n```{.r .cell-code}\n      ggplot(merged, aes( y = visits.ratio, x =post.date, )) +\n          geom_point(color =\"blue\" )    +\n          labs(title = \"Visits.ratio per post \", x = \"Post.date\", y = \"Value\") + \n          theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](Final_Project_check_in_2_Diana_Rinker_files/figure-html/unnamed-chunk-9-2.png){width=672}\n:::\n:::\n\n\nFrom the two graphs above we can see that the two variables are\ndistributed very similarly.\n\nIf we plot them against each other and visualize their correlation, we\ncan see that they highly correlated especially in higher values.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n      plot(merged$uniques.ratio, merged$visits.ratio)\n```\n\n::: {.cell-output-display}\n![](Final_Project_check_in_2_Diana_Rinker_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n\n```{.r .cell-code}\ncorrelation <- cor(merged$uniques.ratio, merged$visits.ratio)\ncorrelation\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.915789\n```\n:::\n:::\n\n\nDensity of the distribution also showing that most posts are visited\nonce and by unique users, i.e. post is read once by each user.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# DENSITY DISTRIBUTION HERE \n```\n:::\n\n\n### Exit rate\n\nThis variable is measuring how many people visited the page and then\nleft the website after the first view. This metric is the best measure\nof engagement for all users, as it represents the first step after being\nexposed to the post - either quitting the site or remaining on the site.\n\nHere can see the distribution of this variable :\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# str(merged)\nmerged$`Exit rate` <- as.numeric(sub(\"%\", \"\", merged$`Exit rate`)) / 100\n\nggplot(data=merged, mapping=aes(x=`Exit rate`))+\n  geom_histogram()\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n```\n:::\n\n::: {.cell-output-display}\n![](Final_Project_check_in_2_Diana_Rinker_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\nWe can also see consistent increase of this value ovr time, similar to\nthe trend seen before:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(merged, mapping = aes(x=year_month , y=`Exit rate`, fill=year_month ))+\n  geom_boxplot() +\n  labs(title = \"distribution of `Exit rate` per post \", y = \"Exit rate\" , x=\"Month\")+ \n     theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](Final_Project_check_in_2_Diana_Rinker_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\n### Number of reactions\n\nThis represents total amount of likes and dislikes of comments per\npost.To like/dislike the comment, user doesn't have to log in.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# merged$year_month \n# colnames(merged)\n\nggplot(data=merged, mapping=aes(x=post.total.likes))+\n  geom_histogram()+\n  labs(title=\" Number of all reactions per post\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n```\n:::\n\n::: {.cell-output-display}\n![](Final_Project_check_in_2_Diana_Rinker_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\nSince we already saw that there is large variability in popularity of\nposts, which can natually impact absolute amount of reactions. To\naccount for number of views, we calculate reactions.ratio:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n  merged <- merged %>%\n     mutate(reactions.ratio = post.total.likes / `Page views`)\n  \n# str(merged)\nggplot(merged, mapping = aes(x=year_month , y=reactions.ratio, fill=year_month ))+\n  geom_boxplot() +\n  labs(title = \"distribution of reactions \", y = \"Percentage of reactions \" )+\n  scale_y_continuous(breaks = seq (from=0, to= 10000, by= 100)) + \n     theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](Final_Project_check_in_2_Diana_Rinker_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n\nThe absolute number of reactions and the ratio appear to decrease over\ntime.\n\n\n\n### Number of comments: engagement metric for subset of readers. Absolute and per views.\n\nTo comment on the requires logging in from a user, which is an indicator\nof greater engagement of an individual user. Therefore this variable\nrepresents engagement of a subset of users - more loyal readers who have\ncreated an account.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# merged$year_month \nggplot(data=merged, mapping=aes(x=n.comments))+\n  geom_histogram()\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n```\n:::\n\n::: {.cell-output-display}\n![](Final_Project_check_in_2_Diana_Rinker_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n\nAnd change in the distribution over time:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(merged, mapping = aes(x=year_month , y=n.comments, fill=year_month ))+\n  geom_boxplot() +\n  labs(title = \"distribution of comments per post \", y = \"Number of comments\" )+\n  scale_y_continuous(breaks = seq (from=0, to= 10000, by= 100)) + \n     theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](Final_Project_check_in_2_Diana_Rinker_files/figure-html/unnamed-chunk-17-1.png){width=672}\n:::\n:::\n\n\nThe trend in amount of comments over time is different. While previously\nreviewed variables seemed to increase over time, this variable\ndecreases.\n\nWe can calculate the ratio of comments per If we compare absolute values\nfo comments and ratio of comments per page views, we see the decrease in\nboth cases, while the ratio's decrease is more dramatic:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n  merged <- merged %>%\n     mutate(comments.ratio = n.comments/ `Page views`)\n\nggplot(merged, mapping = aes(x=year_month , y=comments.ratio, fill=year_month ))+\n  geom_boxplot() +\n  labs(title = \"distribution of comments ratio (comments/page views) \", y = \"Number of comments\" )+\n  scale_y_continuous(breaks = seq (from=0, to= 10000, by= 100)) + \n     theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](Final_Project_check_in_2_Diana_Rinker_files/figure-html/unnamed-chunk-18-1.png){width=672}\n:::\n:::\n\n\nWE can see that with an increase of views (mostly driven by post\npopularity), comments ratio decreeases. So, newly added viewers are not\nadding to the engaged subset of readers.\n<!-- It is also more likely that the users who logged and commented will return to the post page , which would correspond with the decrased in visits.ratio and uniques.ratio).  -->\n\nThe distribution of comments per post over time:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# str(merged)\nggplot(merged, mapping = aes(x=year_month , y=post.total.likes, fill=year_month ))+\n  geom_boxplot() +\n  labs(title = \"distribution of reactions over time  \", y = \"Percentage of reactions \" )+\n  scale_y_continuous(breaks = seq (from=0, to= 10000, by= 100)) + \n     theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](Final_Project_check_in_2_Diana_Rinker_files/figure-html/unnamed-chunk-19-1.png){width=672}\n:::\n:::\n\n\n## 1.3 Impact of popularity on engagement.\nSince we noticed a pattern in distribution of describbed variables, lets find out how they are interconnected, and how popularity of the post impact users' engagement: \n\n \n\n::: {.cell}\n\n```{.r .cell-code}\npairs(subset (merged, select=c(Uniques, `Exit rate`, uniques.ratio, visits.ratio, reactions.ratio )))\n```\n\n::: {.cell-output-display}\n![](Final_Project_check_in_2_Diana_Rinker_files/figure-html/unnamed-chunk-20-1.png){width=672}\n:::\n:::\n\n\nThis graph showing that  popularity is  strongly correlated with all engagement metrics, such as Exit rate, uniques ratio, visit ratio and reaction's ratio, where an increase in popularity causes decrease of engagement across all 4 metrics for engagement.\n\nWe can also see that the relationship between Popularity and engagement rate are curvi-linear. If we log the values, we will see linear relationship: \n\n::: {.cell}\n\n```{.r .cell-code}\npairs(subset (merged, select=c(log(Uniques), log(`Exit rate`), uniques.ratio, visits.ratio, reactions.ratio )))\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in `x[r, vars, drop = drop]`:\n! Can't subset columns with `vars`.\nâœ– Can't convert from `j` <double> to <integer> due to loss of precision.\n```\n:::\n\n```{.r .cell-code}\n# WHT DOES THE GRAPH SHOWS POST.DATE and POST.DATE1  INSTEAD OF \"UNIQUES\" and  \"Exit rate\"? \n```\n:::\n\n\n\nAs we saw in the distributions of variables above, all engagement metrics are strongly correlate with each other the popularity metric. \n\n\n\n### 1.3.1. Modeling engagement ~ popularity: \nLets review how it is impacting exit rate :\nI will use \"Exit rate\" s my main engagement  variable, as it reporesents the first engagement chouce that all site users make: to stay on the site or leave. Using log() of popularity is shoing a better fitted model: \n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(merged, mapping=aes(x=log(Uniques), y=`Exit rate` ))+\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](Final_Project_check_in_2_Diana_Rinker_files/figure-html/unnamed-chunk-22-1.png){width=672}\n:::\n\n```{.r .cell-code}\nsummary(lm(`Exit rate`~ + log(Uniques) , data = merged))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nlm(formula = `Exit rate` ~ +log(Uniques), data = merged)\n\nResiduals:\n      Min        1Q    Median        3Q       Max \n-0.259486 -0.016818  0.001917  0.019850  0.073240 \n\nCoefficients:\n              Estimate Std. Error t value Pr(>|t|)    \n(Intercept)  -0.332581   0.027678  -12.02   <2e-16 ***\nlog(Uniques)  0.113870   0.002855   39.89   <2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.03073 on 533 degrees of freedom\nMultiple R-squared:  0.749,\tAdjusted R-squared:  0.7486 \nF-statistic:  1591 on 1 and 533 DF,  p-value: < 2.2e-16\n```\n:::\n:::\n\n\nWe can see  significance of popularity and  high R^2 of the model, and can conclude that popularity overall decreases engagement.  To explore this connection further, lets mreview Sources of users that are coming to the website.\n\n\n\n\n\n### 1.3.2. How popularity impacts engagement: Referral sources.\n\nThe website analytics provides information on where the viewers are\ncoming from to the blog page. for example, if people clicked on the blog\nlink posted on FaceBook, that would be referral from social media. If\npeople clicked on the blog link within BDC website, that would be \"BDC\nreferral visit\".\n\nThere are 5 sources of referrals, each corresponding with a variable in\nthe data set. Variable's value is a number of visits from this referral\nsource.\n\n```         \n    \"Search + amp referral visits\"\n    \"Direct (non-email) referral visits\"\n    \"Other website referral visits\"\n    \"Social referral visits\"\n    \"BDC referral visits\"\n    \"Visits when post was on LL HP\" \n```\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#renaming variables for convenience: \nmerged<-merged%>%\n  rename(google =\"Search + amp referral visits\",\n         direct =\"Direct (non-email) referral visits\",\n         other.web = \"Other website referral visits\",\n          social= \"Social referral visits\",\n          bdc= \"BDC referral visits\",\n          ll= \"Visits when post was on LL HP\" )\n\nggplot(merged, mapping=aes(x=post.date))+\n  geom_point(aes(y=google), color=\"red\")+\n  geom_point(aes(y=direct), color=\"green\")+\n  geom_point(aes(y=other.web), color=\"yellow\")+\n  geom_point(aes(y=social), color=\"purple\")+\n  geom_point(aes(y=bdc), color=\"blue\")+\n  geom_point(aes(y=ll), color=\"pink\")  +\n  labs(title = \"referral sources per post \", y = \"Number of referrals\" , x=\"Post\")+ \n     theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](Final_Project_check_in_2_Diana_Rinker_files/figure-html/unnamed-chunk-23-1.png){width=672}\n:::\n:::\n\n\nThis graph clearly demonstrates increase of \"Search + amp referral\nvisits\" after December 2021, while other referral sources maintain the\nsame level over time. This increase matches changes observed in\npopularity ( Page Views), and engagement metrics that are highly\ncorrelated with popularity. It also doubles views of the posts in many\ncases and might significanly influence our model and conclusions.\n\n### Early comments'impact \n\nWe saw that increased popularity is associated with the sources of the viewers and might come from the search engines.\nWe want to find out if early engagement in the post ( comments within first 10 hours of the post time) trigger its appearance in google news listing and therefore cause sharp increase in popularity. \n\nWe are interested to find out, what characteristics of the post (prior\nto it being picked up by google), correlate with its appearance on\ngoogle news.\n\nNumber of comments within 1st 10 hours from the post.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#  calculating number of comments within first 10 hours \n\n# date and time of the post \npost.date  <-comments.data %>%\n  group_by(post_id)%>%\n  arrange(written_at)%>%\n  summarize(post.dt = first(written_at), \n            n.coms =n())%>%\n  filter (n.coms>100)%>%\n  select(post_id, post.dt, n.coms)%>%\narrange(desc(post_id))\n# head(post.date)\n\n# Calculating age of the post \ncomments.data <- merge( comments.data , post.date , by = \"post_id\", all = TRUE)\ncomments.data <-comments.data %>%\n  mutate (age = difftime(  written_at,post.dt, units = \"hours\"), \n          early = ifelse(age<10, 1, 0))\n\nearly.coms  <-comments.data%>%\n  group_by(post_id)%>%\n  arrange(written_at)%>%\n  summarize(early.sum = sum(early), \n            n.coms =n())%>%\n  filter (n.coms>100)%>%\n  select(post_id, early.sum)%>%\narrange(desc(post_id))\n\n# Adding number of early comments to merged dataset:\nmerged <- merge( merged, early.coms , by = \"post_id\", all = TRUE)\n\nhead(merged )\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   post_id  post.date\n1 27067757 2023-03-01\n2 27067763 2023-02-28\n3 27067769 2023-02-27\n4 27067775 2023-02-24\n5 27067781 2023-02-23\n6 27067787 2023-02-22\n                                                                             Letter\n1                          love letters | blog | We&'ve gained weight â€“ as a couple\n2           love letters | blog | She was a friendly ghost, but I was still ghosted\n3 love letters | blog | I waited for her to initiate sex â€“ and it ended my marriage\n4                         love letters | blog | My husband doesn&'t share his money\n5                              love letters | blog | My wife won&'t go back to work\n6                                love letters | blog | He doesn&'t have time for me\n  Page views google direct Visits Uniques other.web social   bdc   ll Exits\n1      24890  10407  10180  22766   20765       349     56  7088 2785 18547\n2      15575   1210  10297  13597   11677       214     85  7461 2832 10127\n3      28594   7027  15609  26115   23914       909     87 12957 3016 22464\n4      72718  43419  19921  67007   62122       311    134 14106 4216 60915\n5      67537  43173  16863  62888   59272       310    152 12344 2739 56929\n6      28778  14466   9698  26269   23865       331     67  6332 3003 21515\n  Exit rate dup n.comments post.year post.month post.likes post.dislikes\n1      0.81   0        208      2023          3       1001           167\n2      0.74   0        264      2023          2       1908           118\n3      0.86   0        241      2023          2       1195           167\n4      0.91   0        321      2023          2       1921           341\n5      0.91   0        294      2023          2       1445           549\n6      0.82   0        182      2023          2       1337            85\n  post.total.likes blocked.sum pct.positive year_month uniques.ratio\n1             1168           1     85.70205    2023-03     0.8342708\n2             2026           1     94.17572    2023-02     0.7497271\n3             1362           1     87.73862    2023-02     0.8363293\n4             2262           3     84.92485    2023-02     0.8542864\n5             1994           0     72.46740    2023-02     0.8776226\n6             1422           0     94.02250    2023-02     0.8292793\n  visits.ratio reactions.ratio comments.ratio early.sum\n1    0.9146645      0.04692648    0.008356770       192\n2    0.8730016      0.13008026    0.016950241       247\n3    0.9133035      0.04763237    0.008428342       214\n4    0.9214637      0.03110647    0.004414313       261\n5    0.9311637      0.02952456    0.004353169       240\n6    0.9128153      0.04941275    0.006324275       142\n```\n:::\n:::\n\n\nNow, as I calculated number of early comments for all posts, I can see\nif that number correlated with Google referrals. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nmerged.2<-merged%>%\n  filter(google>10000)\ncorrelation.2 <- cor(merged.2$early.sum, merged.2$google)\ncorrelation.2\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.2736053\n```\n:::\n\n```{.r .cell-code}\nplot(merged.2$early.sum, merged.2$google)\n```\n\n::: {.cell-output-display}\n![](Final_Project_check_in_2_Diana_Rinker_files/figure-html/unnamed-chunk-25-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(lm(google ~early.sum, data=merged.2))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nlm(formula = google ~ early.sum, data = merged.2)\n\nResiduals:\n   Min     1Q Median     3Q    Max \n-15035  -6141  -2482   3559  54900 \n\nCoefficients:\n            Estimate Std. Error t value Pr(>|t|)   \n(Intercept)  5908.84    5265.21   1.122  0.26406   \nearly.sum      94.56      30.73   3.077  0.00261 **\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 10600 on 117 degrees of freedom\nMultiple R-squared:  0.07486,\tAdjusted R-squared:  0.06695 \nF-statistic: 9.467 on 1 and 117 DF,  p-value: 0.002605\n```\n:::\n\n```{.r .cell-code}\nsummary(lm(google ~early.sum, data=merged))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nlm(formula = google ~ early.sum, data = merged)\n\nResiduals:\n   Min     1Q Median     3Q    Max \n -7036  -5548  -4652   2036  68716 \n\nCoefficients:\n            Estimate Std. Error t value Pr(>|t|)    \n(Intercept) 8921.388   1789.530   4.985 8.38e-07 ***\nearly.sum    -12.627      9.921  -1.273    0.204    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 9806 on 533 degrees of freedom\nMultiple R-squared:  0.00303,\tAdjusted R-squared:  0.001159 \nF-statistic:  1.62 on 1 and 533 DF,  p-value: 0.2037\n```\n:::\n:::\n\n\nWe can see significant connection between early comments and google\nreferrals,  only on the data set of google referrals above 10000 visits. Also, R\\^2 is low in this model, which\nsuggests that there are other factors that are not considered in this\nmodel. I will explore how days of the week and time of the post\ncontribute to this relationship.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# calculating day of the week for the post: \ncolnames(comments.data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"post_id\"           \"content\"           \"message_id\"       \n [4] \"user_id\"           \"user_name\"         \"display_name\"     \n [7] \"image_url\"         \"email\"             \"email_verified\"   \n[10] \"created_at\"        \"private_profile\"   \"approved\"         \n[13] \"written_at\"        \"parent\"            \"absolute_likes\"   \n[16] \"absolute_dislikes\" \"comment.year\"      \"com.year\"         \n[19] \"post.dt\"           \"n.coms\"            \"age\"              \n[22] \"early\"            \n```\n:::\n\n```{.r .cell-code}\n# Calculating age of the post \nlibrary(lubridate)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'lubridate'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:base':\n\n    date, intersect, setdiff, union\n```\n:::\n\n```{.r .cell-code}\ncomments.data <-comments.data %>%\n  mutate (weekday = wday(post.dt, label = TRUE), \n          weekend = ifelse(weekday ==\"Fri\" | weekday == \"Sat\", 1, 0))\n\n# class(week.days$weekday)\n# levels(week.days$weekday) \n# week.days$weekend\n\nweekdays <-comments.data %>%\n  group_by(post_id)%>%\n  arrange(written_at)%>%\n  summarize(post.weekday = first(weekday), \n            post.weekend =first(weekend),\n            n.coms =n())%>%\n  filter (n.coms>100)%>%\n  select(post_id, post.weekday,post.weekend )%>%\narrange(desc(post_id))\n\n# Adding number of early comments to merged dataset:\nmerged <- merge( merged, weekdays , by = \"post_id\", all = TRUE)\ncolnames(merged)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"post_id\"          \"post.date\"        \"Letter\"           \"Page views\"      \n [5] \"google\"           \"direct\"           \"Visits\"           \"Uniques\"         \n [9] \"other.web\"        \"social\"           \"bdc\"              \"ll\"              \n[13] \"Exits\"            \"Exit rate\"        \"dup\"              \"n.comments\"      \n[17] \"post.year\"        \"post.month\"       \"post.likes\"       \"post.dislikes\"   \n[21] \"post.total.likes\" \"blocked.sum\"      \"pct.positive\"     \"year_month\"      \n[25] \"uniques.ratio\"    \"visits.ratio\"     \"reactions.ratio\"  \"comments.ratio\"  \n[29] \"early.sum\"        \"post.weekday\"     \"post.weekend\"    \n```\n:::\n\n```{.r .cell-code}\n# levels(merged$post.weekday)\n```\n:::\n\n\n### Post weekdays to the model\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmerged.2<-merged %>%\n  filter(google>10000)\n\n plot(merged$post.weekday, merged$google)\n```\n\n::: {.cell-output-display}\n![](Final_Project_check_in_2_Diana_Rinker_files/figure-html/unnamed-chunk-28-1.png){width=672}\n:::\n\n```{.r .cell-code}\nsummary(lm(log(google) ~early.sum +post.weekday , data=merged.2))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nlm(formula = log(google) ~ early.sum + post.weekday, data = merged.2)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-0.85556 -0.25080 -0.05083  0.23281  1.25348 \n\nCoefficients:\n               Estimate Std. Error t value Pr(>|t|)    \n(Intercept)     9.30191    0.20350  45.710  < 2e-16 ***\nearly.sum       0.00352    0.00119   2.958  0.00377 ** \npost.weekday.L  0.01571    0.08732   0.180  0.85751    \npost.weekday.Q -0.02154    0.08544  -0.252  0.80145    \npost.weekday.C -0.02274    0.08280  -0.275  0.78409    \npost.weekday^4  0.15962    0.08043   1.985  0.04962 *  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.4058 on 113 degrees of freedom\nMultiple R-squared:  0.102,\tAdjusted R-squared:  0.06229 \nF-statistic: 2.568 on 5 and 113 DF,  p-value: 0.03066\n```\n:::\n\n```{.r .cell-code}\n# table(merged.weekdays$post.weekday)\n\nggplot (merged, mapping =aes(x=early.sum, y=google, color =post.weekday))+\n  geom_point( ) +\n  geom_smooth(method=\"lm\")+\n  labs(title = \"All google referrals and early comments\", y = \"Google referrals\" , x=\"Early comments\")+ \n     theme(axis.text.x = element_text(angle = 45, hjust = 1))+\n  facet_wrap(~post.weekday)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n:::\n\n::: {.cell-output-display}\n![](Final_Project_check_in_2_Diana_Rinker_files/figure-html/unnamed-chunk-28-2.png){width=672}\n:::\n\n```{.r .cell-code}\nggplot (merged.2, mapping =aes(x=early.sum, y=google, color =post.weekday))+\n  geom_point( ) +\n  geom_smooth(method=\"lm\")+\n  labs(title = \"Google referrals over 10K and early comments\", y = \"Google referrals\" , x=\"Early comments\")+ \n     theme(axis.text.x = element_text(angle = 45, hjust = 1))+\n  facet_wrap(~post.weekday)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n:::\n\n::: {.cell-output-display}\n![](Final_Project_check_in_2_Diana_Rinker_files/figure-html/unnamed-chunk-28-3.png){width=672}\n:::\n:::\n\n\nEarly comments indeed influence Google referrals. However, this influence is different on different days of the week and appears more pronounced on Thursdays and Fridays.  This overall supports our suggestion that early engagement of loyal users through comments impacts post popularity. further investigation of factors would be helpful, with the goal to  model fit (R^2).\n\n\n\nOur hypothesis that large amount of early comments triggers google\nreferrals has some preliminary support with the few restrictiions to be considere: \n- the connection only appears on the posts with google referrals above 10000. \n- This connection is atronger for only thursdays and Fridays and  appears very weak on other days of the week. \n- low coefficient and high deviation of data from predicated valaues (low R\\^2) suggest\nthat there are other , more influential, factors that were not considered. \n\n## 1.4.Conclusion\n\nAs we reviewed a variety of engagement metric, I found:\n1. That they are all strongly correlated to each other and influenced by post popularity:\nEngagement overall decreases as popularity increases.In our further analysis I will need to include \"Uniques\" variable in the\nmodel to control for popularity\n\n2.  Also as a result of exploration of engagement metrics, we can\n    distinguish two types of users: superficial visitors and loyal\n    readers. The main difference is that loyal readers have created\n    accounts and therefore can comment. It is possible that htese two groups of readers  respond differently to popularity increase, as well as other Independent variables. Therefore, the difference in types of readers must be considered when addressing our main hypothesi: whether authors engagement and other factors impacts reader's engagement.\n    \n3. Early engagement of loyal users through comments might contribute to dramatic changes in post popularity. \n\n\n\nNow, lets consider independent variables of our main hypothesis. \n# 2. Independent variables (IV):\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(stargazer)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nPlease cite as: \n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n Hlavac, Marek (2022). stargazer: Well-Formatted Regression and Summary Statistics Tables.\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n R package version 5.2.3. https://CRAN.R-project.org/package=stargazer \n```\n:::\n\n```{.r .cell-code}\nstargazer()\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in if (substr(inside[i], 1, nchar(\"list(\")) == \"list(\") {: missing value where TRUE/FALSE needed\n```\n:::\n:::\n\n\n\n### Authors comments\n\nTo identify, how much the author of the blog is engaged in the post, I\nwill create an additional variable derived from a user_name field.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# str(merged)\ncomments.data$user_name<-  ifelse (is.na(comments.data$user_name), 0, comments.data$user_name)\ncomments.data$author<-  ifelse (comments.data$user_name==\"MeredithGoldstein\", 1, 0)\n\ncomments.grouped <-comments.data %>%\n  group_by(post_id)%>%\n  summarize(n.comments=n(),\n            author.sum = sum(author))\n\n# dim(comments.grouped )\n# colnames(comments.grouped )\n# class(comments.grouped$author.sum)\n\n# Comments data contains rows that dont actually reporesent posts, and were crearted by web support team for troubleshooting. I need to remove these rows. They typically have very low number of comments\ncomments.grouped <-comments.grouped %>%\nfilter(n.comments >100)  # removing invalid posts created by the  website management team.\n\ncomments.grouped <-comments.grouped %>%\n  select(post_id, author.sum)\n dim(comments.grouped)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 535   2\n```\n:::\n\n```{.r .cell-code}\n#adding author.sum to main data set: \nmerged <- merge( merged , comments.grouped, by = \"post_id\", all = TRUE)\n\n\nggplot(data=merged, mapping = aes(x=year_month , y=author.sum, fill=year_month ))+\n  geom_boxplot() +\n  labs(title = \"distribution of Author's comments by months\", y = \"Author's comments\" , x=\"Month\")+ \n     theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](Final_Project_check_in_2_Diana_Rinker_files/figure-html/unnamed-chunk-30-1.png){width=672}\n:::\n:::\n\n\nThis graph shows, that majority of posts have no author's comments.\nHowever, if we look at the box plots' upper ranges, we can suggest a\ntrend of decrease in author's comments with time.\n\n### Mood of the post.\n\nThis is a numerical variable, calculated as percentage of \"thumbs up\"\nfrom all likes (both \"thumbs up\" and \"thumbs down\").\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(merged, mapping = aes(x=year_month , y=pct.positive, fill=year_month ))+\n  geom_boxplot() +\n  labs(title = \"distribution of Mood per post \", y = \"Mood\" , x=\"Month\")+ \n     theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](Final_Project_check_in_2_Diana_Rinker_files/figure-html/unnamed-chunk-31-1.png){width=672}\n:::\n:::\n\n\n### Blocked comments per post.\n\nNow I will visualize amount of blocked comments per post:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(merged, mapping = aes(x=year_month , y=blocked.sum, fill=year_month ))+\n  geom_boxplot() +\n  labs(title = \"Number Blocked comments  per post \", y = \"Number of blocked comments per post\" , x=\"Month\")+ \n     theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](Final_Project_check_in_2_Diana_Rinker_files/figure-html/unnamed-chunk-32-1.png){width=672}\n:::\n:::\n\n\n# 3. Creating the model for main hypothesis testing\n\nAs we mentioned above, we will add popularity to the model when testing main hypothesis. Also,  I am going to break the data set into two groups: prior to December 2021 and after December 2021 due to  dramatic change in referral sources. I will use these two datasets to to test my main hypothesis and compare results. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nmerged.2021 <- merged%>%\n  filter(post.date <\t\"2021-12-01\")\nmerged.2022 <- merged%>%\n  filter(post.date >=\t\"2021-12-01\")\n```\n:::\n\n\n\n\n## 3.1 Basic model. \n\nI will start with creating a simple model of engagement ~ popularity and author's engagement: \n\n::: {.cell}\n\n```{.r .cell-code}\n# colnames(merged)\nsummary(lm(`Exit rate` ~ log(Uniques)+ author.sum, data = merged))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nlm(formula = `Exit rate` ~ log(Uniques) + author.sum, data = merged)\n\nResiduals:\n      Min        1Q    Median        3Q       Max \n-0.257486 -0.016558  0.001669  0.019958  0.072030 \n\nCoefficients:\n              Estimate Std. Error t value Pr(>|t|)    \n(Intercept)  -0.326263   0.027749 -11.758   <2e-16 ***\nlog(Uniques)  0.113326   0.002857  39.663   <2e-16 ***\nauthor.sum   -0.003389   0.001602  -2.116   0.0348 *  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.03063 on 532 degrees of freedom\nMultiple R-squared:  0.7511,\tAdjusted R-squared:  0.7502 \nF-statistic: 802.9 on 2 and 532 DF,  p-value: < 2.2e-16\n```\n:::\n\n```{.r .cell-code}\nsummary(lm(`Exit rate` ~ log(Uniques)+ author.sum, data = merged.2021))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nlm(formula = `Exit rate` ~ log(Uniques) + author.sum, data = merged.2021)\n\nResiduals:\n      Min        1Q    Median        3Q       Max \n-0.257995 -0.018855  0.000548  0.027265  0.069625 \n\nCoefficients:\n              Estimate Std. Error t value Pr(>|t|)    \n(Intercept)  -0.402793   0.096359  -4.180 4.18e-05 ***\nlog(Uniques)  0.121731   0.010266  11.857  < 2e-16 ***\nauthor.sum   -0.002533   0.002568  -0.986    0.325    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.0372 on 224 degrees of freedom\nMultiple R-squared:  0.3856,\tAdjusted R-squared:  0.3801 \nF-statistic:  70.3 on 2 and 224 DF,  p-value: < 2.2e-16\n```\n:::\n\n```{.r .cell-code}\nsummary(lm(`Exit rate` ~ log(Uniques)+ author.sum, data = merged.2022))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nlm(formula = `Exit rate` ~ log(Uniques) + author.sum, data = merged.2022)\n\nResiduals:\n      Min        1Q    Median        3Q       Max \n-0.083434 -0.014968  0.002043  0.017982  0.053266 \n\nCoefficients:\n              Estimate Std. Error t value Pr(>|t|)    \n(Intercept)  -0.354200   0.029528 -11.995  < 2e-16 ***\nlog(Uniques)  0.115989   0.002974  38.996  < 2e-16 ***\nauthor.sum   -0.005402   0.001997  -2.705  0.00722 ** \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.02455 on 305 degrees of freedom\nMultiple R-squared:  0.8369,\tAdjusted R-squared:  0.8359 \nF-statistic: 782.7 on 2 and 305 DF,  p-value: < 2.2e-16\n```\n:::\n:::\n\n\nTo see how engagement of a subset of readers changes (loyal readers),  I will use another measure for engagement as DV, which represents only registered users:  number of comments. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(lm(n.comments ~ log(Uniques) + author.sum , data = merged))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nlm(formula = n.comments ~ log(Uniques) + author.sum, data = merged)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-98.670 -35.171  -8.842  26.596 181.918 \n\nCoefficients:\n             Estimate Std. Error t value Pr(>|t|)    \n(Intercept)   238.521     45.076   5.292 1.78e-07 ***\nlog(Uniques)   -4.667      4.641  -1.006   0.3151    \nauthor.sum      4.872      2.602   1.872   0.0617 .  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 49.75 on 532 degrees of freedom\nMultiple R-squared:  0.009115,\tAdjusted R-squared:  0.00539 \nF-statistic: 2.447 on 2 and 532 DF,  p-value: 0.08752\n```\n:::\n:::\n\n\nThis shows that engagement is decreasing with popularity and someone increasing with author's comments. \nfor loyal readers : engagement is also sensitive to author's comments, but not sensitive to popularity of the post.\n\n###  analize change in x1 and x2 to y , considering log() \n\n## 3.2 Adding other variables.\nNow I will add other variables  to see if there is any impact on the results of the model with engagement of both groups of readers. \nFor number of comments,  I would have to select either early.sum  or n.comments, due to high correlation between them\n\n::: {.cell}\n\n```{.r .cell-code}\n(cor(merged$early.sum, merged$n.comments))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.9507822\n```\n:::\n:::\n\nI am including n/comments in the model, to see if engagement of loyal readers through comments impact overall engagement:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# colnames(merged)\nsummary(lm(`Exit rate` ~ log(Uniques)+ author.sum + pct.positive +blocked.sum+post.weekday +n.comments, data = merged))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nlm(formula = `Exit rate` ~ log(Uniques) + author.sum + pct.positive + \n    blocked.sum + post.weekday + n.comments, data = merged)\n\nResiduals:\n      Min        1Q    Median        3Q       Max \n-0.249664 -0.014653  0.001237  0.018954  0.061566 \n\nCoefficients:\n                 Estimate Std. Error t value Pr(>|t|)    \n(Intercept)    -3.658e-01  3.738e-02  -9.787  < 2e-16 ***\nlog(Uniques)    1.135e-01  2.803e-03  40.492  < 2e-16 ***\nauthor.sum     -4.158e-03  1.551e-03  -2.681  0.00756 ** \npct.positive    1.488e-04  2.369e-04   0.628  0.53032    \nblocked.sum    -3.634e-04  2.099e-04  -1.732  0.08391 .  \npost.weekday.L -1.959e-03  3.001e-03  -0.653  0.51425    \npost.weekday.Q  1.332e-02  2.879e-03   4.627 4.69e-06 ***\npost.weekday.C  1.109e-04  2.825e-03   0.039  0.96869    \npost.weekday^4  3.235e-03  2.797e-03   1.157  0.24793    \nn.comments      1.384e-04  2.642e-05   5.237 2.36e-07 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.02933 on 525 degrees of freedom\nMultiple R-squared:  0.7748,\tAdjusted R-squared:  0.771 \nF-statistic: 200.7 on 9 and 525 DF,  p-value: < 2.2e-16\n```\n:::\n:::\n\nAhd it is shown to be significant, negativelly impacting overall engagement. considering our finding s earlier, that early comments increase popularity and therefore decrease overall engagement, this is expected. Tuesday as level of \"weekday\" also shows to significantly decrease engagement. \n\nAuthors engagement, day of the week(Tuesday) and blocked comments seem to increase engagement. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(lm(n.comments ~ log(Uniques) + author.sum + pct.positive +blocked.sum +post.weekday, data = merged)) #not adding early.sum due to high correlation with DV: cor(merged$early.sum, merged$n.comments): 0.95\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nlm(formula = n.comments ~ log(Uniques) + author.sum + pct.positive + \n    blocked.sum + post.weekday, data = merged)\n\nResiduals:\n   Min     1Q Median     3Q    Max \n-84.53 -33.89  -9.63  25.39 183.31 \n\nCoefficients:\n               Estimate Std. Error t value Pr(>|t|)    \n(Intercept)    106.8646    61.5191   1.737  0.08296 .  \nlog(Uniques)    -1.8812     4.6253  -0.407  0.68438    \nauthor.sum       3.9147     2.5540   1.533  0.12593    \npct.positive     1.1648     0.3878   3.004  0.00279 ** \nblocked.sum      0.8864     0.3443   2.575  0.01030 *  \npost.weekday.L  21.7036     4.8624   4.464 9.87e-06 ***\npost.weekday.Q   6.0475     4.7449   1.275  0.20304    \npost.weekday.C   1.0266     4.6622   0.220  0.82581    \npost.weekday^4  -0.1307     4.6164  -0.028  0.97743    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 48.41 on 526 degrees of freedom\nMultiple R-squared:  0.07252,\tAdjusted R-squared:  0.05841 \nF-statistic: 5.141 on 8 and 526 DF,  p-value: 3.455e-06\n```\n:::\n:::\n\n\n While general viewers show no impact by mood of the post or blocked comments, we see significant positive correlation of engagement with all of these metrics for loyal readers(=commenters). \n\n\nNumber of comments, representing engagement is somewhat impacted by\nthree independent variables, but this model has low R\\^2 , which\nsuggests that there are other factors impacting loyal reader's\nengagement that are not considered in this model.\n\n\n\n\n\n## 3.3 Using different datasets for comparing: \n\n### Exit rate  for 2021 and 2022:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# colnames(merged)\nsummary(lm(`Exit rate` ~ log(Uniques)+ author.sum + pct.positive +blocked.sum, data = merged.2021))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nlm(formula = `Exit rate` ~ log(Uniques) + author.sum + pct.positive + \n    blocked.sum, data = merged.2021)\n\nResiduals:\n      Min        1Q    Median        3Q       Max \n-0.258483 -0.017314  0.000667  0.027730  0.077470 \n\nCoefficients:\n               Estimate Std. Error t value Pr(>|t|)    \n(Intercept)  -5.315e-01  1.194e-01  -4.451 1.35e-05 ***\nlog(Uniques)  1.259e-01  1.053e-02  11.949  < 2e-16 ***\nauthor.sum   -2.673e-03  2.563e-03  -1.043   0.2981    \npct.positive  1.009e-03  5.573e-04   1.811   0.0715 .  \nblocked.sum   7.438e-05  4.341e-04   0.171   0.8641    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.03709 on 222 degrees of freedom\nMultiple R-squared:  0.3946,\tAdjusted R-squared:  0.3837 \nF-statistic: 36.18 on 4 and 222 DF,  p-value: < 2.2e-16\n```\n:::\n\n```{.r .cell-code}\nsummary(lm(`Exit rate` ~ log(Uniques)+ author.sum + pct.positive +blocked.sum, data = merged.2022))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nlm(formula = `Exit rate` ~ log(Uniques) + author.sum + pct.positive + \n    blocked.sum, data = merged.2022)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-0.08367 -0.01553  0.00204  0.01839  0.05326 \n\nCoefficients:\n               Estimate Std. Error t value Pr(>|t|)    \n(Intercept)  -0.3315325  0.0368576  -8.995  < 2e-16 ***\nlog(Uniques)  0.1153984  0.0029870  38.633  < 2e-16 ***\nauthor.sum   -0.0052803  0.0019958  -2.646  0.00858 ** \npct.positive -0.0001812  0.0002344  -0.773  0.44014    \nblocked.sum  -0.0003622  0.0002190  -1.654  0.09915 .  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.0245 on 303 degrees of freedom\nMultiple R-squared:  0.8386,\tAdjusted R-squared:  0.8365 \nF-statistic: 393.7 on 4 and 303 DF,  p-value: < 2.2e-16\n```\n:::\n:::\n\nExit rate (engagement) still correlates with popularity of the site or bot 2021 and 2021,confirming the same finding from un-splitted data set earlier. \nHowever, author's comments appear only be relevant to all user's engagement in 2022, and not in 2021. Mood of the post appears  significant for user's engagement only in 2021, and blocked comments only appear significant in 2022. \n## 3.2 Diagnostic of the model: \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# colnames(merged)\nmodel.ex.r<- lm(`Exit rate` ~ log(Uniques)+ author.sum + pct.positive +blocked.sum, data = merged)\n\npar(mfrow = c(2,3))\nplot(model.ex.r, which = 1:6)\n```\n\n::: {.cell-output-display}\n![](Final_Project_check_in_2_Diana_Rinker_files/figure-html/unnamed-chunk-40-1.png){width=672}\n:::\n\n```{.r .cell-code}\nex.r.2021 <- lm(`Exit rate` ~ log(Uniques)+ author.sum + pct.positive +blocked.sum, data = merged.2021)\nex.r.2022 <-lm(`Exit rate` ~ log(Uniques)+ author.sum + pct.positive +blocked.sum, data = merged.2022)\npar(mfrow = c(2,3))\nplot(ex.r.2021, which = 1:6)\n```\n\n::: {.cell-output-display}\n![](Final_Project_check_in_2_Diana_Rinker_files/figure-html/unnamed-chunk-40-2.png){width=672}\n:::\n\n```{.r .cell-code}\npar(mfrow = c(2,3))\nplot(ex.r.2022, which = 1:6)\n```\n\n::: {.cell-output-display}\n![](Final_Project_check_in_2_Diana_Rinker_files/figure-html/unnamed-chunk-40-3.png){width=672}\n:::\n:::\n::: {.cell}\n\n```{.r .cell-code}\nmodel.2<- lm(n.comments ~ log(Uniques) + author.sum + pct.positive +blocked.sum, data = merged)\n\n\npar(mfrow = c(2,3))\nplot(model.2, which = 1:6)\n```\n\n::: {.cell-output-display}\n![](Final_Project_check_in_2_Diana_Rinker_files/figure-html/unnamed-chunk-41-1.png){width=672}\n:::\n:::\n\n\n### Number of comments   for 2021 and 2022:\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(lm(n.comments ~ log(Uniques) + author.sum + pct.positive +blocked.sum, data = merged.2021))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nlm(formula = n.comments ~ log(Uniques) + author.sum + pct.positive + \n    blocked.sum, data = merged.2021)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-106.632  -38.547   -8.915   28.987  167.497 \n\nCoefficients:\n             Estimate Std. Error t value Pr(>|t|)\n(Intercept)  209.0074   180.9229   1.155    0.249\nlog(Uniques)   3.0321    15.9599   0.190    0.849\nauthor.sum     4.5830     3.8832   1.180    0.239\npct.positive  -0.3590     0.8443  -0.425    0.671\nblocked.sum    0.8618     0.6577   1.310    0.191\n\nResidual standard error: 56.19 on 222 degrees of freedom\nMultiple R-squared:  0.01739,\tAdjusted R-squared:  -0.000314 \nF-statistic: 0.9823 on 4 and 222 DF,  p-value: 0.418\n```\n:::\n\n```{.r .cell-code}\nsummary(lm(n.comments ~ log(Uniques) + author.sum + pct.positive +blocked.sum, data = merged.2022))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nlm(formula = n.comments ~ log(Uniques) + author.sum + pct.positive + \n    blocked.sum, data = merged.2022)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-76.762 -28.410  -7.407  25.375 155.874 \n\nCoefficients:\n             Estimate Std. Error t value Pr(>|t|)    \n(Intercept)  -72.7563    59.4359  -1.224 0.221861    \nlog(Uniques)  18.5894     4.8169   3.859 0.000139 ***\nauthor.sum     1.9188     3.2184   0.596 0.551481    \npct.positive   0.7834     0.3780   2.072 0.039094 *  \nblocked.sum    1.1017     0.3531   3.120 0.001981 ** \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 39.51 on 303 degrees of freedom\nMultiple R-squared:  0.07768,\tAdjusted R-squared:  0.0655 \nF-statistic:  6.38 on 4 and 303 DF,  p-value: 6.108e-05\n```\n:::\n:::\n\nNone of the variables show significance for loyal user's engagement(comments) in 2021. However, loyal users are significantly influenced by popularity, mood of the post and blocked comments in 2022. \n\n\n### Adding a weekday:\n\nAdding the weekday of the post ad additional IV increases R\\^2 and shows\nsignificance for one of the levels:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(lm(n.comments ~ log(Uniques) + author.sum + pct.positive +blocked.sum + post.weekday, data = merged))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nlm(formula = n.comments ~ log(Uniques) + author.sum + pct.positive + \n    blocked.sum + post.weekday, data = merged)\n\nResiduals:\n   Min     1Q Median     3Q    Max \n-84.53 -33.89  -9.63  25.39 183.31 \n\nCoefficients:\n               Estimate Std. Error t value Pr(>|t|)    \n(Intercept)    106.8646    61.5191   1.737  0.08296 .  \nlog(Uniques)    -1.8812     4.6253  -0.407  0.68438    \nauthor.sum       3.9147     2.5540   1.533  0.12593    \npct.positive     1.1648     0.3878   3.004  0.00279 ** \nblocked.sum      0.8864     0.3443   2.575  0.01030 *  \npost.weekday.L  21.7036     4.8624   4.464 9.87e-06 ***\npost.weekday.Q   6.0475     4.7449   1.275  0.20304    \npost.weekday.C   1.0266     4.6622   0.220  0.82581    \npost.weekday^4  -0.1307     4.6164  -0.028  0.97743    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 48.41 on 526 degrees of freedom\nMultiple R-squared:  0.07252,\tAdjusted R-squared:  0.05841 \nF-statistic: 5.141 on 8 and 526 DF,  p-value: 3.455e-06\n```\n:::\n\n```{.r .cell-code}\nsummary(lm(`Exit rate` ~ log(Uniques) + author.sum + pct.positive+blocked.sum +post.weekday, data = merged))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nlm(formula = `Exit rate` ~ log(Uniques) + author.sum + pct.positive + \n    blocked.sum + post.weekday, data = merged)\n\nResiduals:\n      Min        1Q    Median        3Q       Max \n-0.253949 -0.016021  0.001578  0.019637  0.065920 \n\nCoefficients:\n                 Estimate Std. Error t value Pr(>|t|)    \n(Intercept)    -0.3510322  0.0381950  -9.191  < 2e-16 ***\nlog(Uniques)    0.1132211  0.0028717  39.427  < 2e-16 ***\nauthor.sum     -0.0036165  0.0015857  -2.281    0.023 *  \npct.positive    0.0003099  0.0002408   1.287    0.199    \nblocked.sum    -0.0002408  0.0002137  -1.127    0.260    \npost.weekday.L  0.0010440  0.0030189   0.346    0.730    \npost.weekday.Q  0.0141570  0.0029459   4.806 2.02e-06 ***\npost.weekday.C  0.0002529  0.0028946   0.087    0.930    \npost.weekday^4  0.0032168  0.0028662   1.122    0.262    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.03006 on 526 degrees of freedom\nMultiple R-squared:  0.7631,\tAdjusted R-squared:  0.7595 \nF-statistic: 211.8 on 8 and 526 DF,  p-value: < 2.2e-16\n```\n:::\n\n```{.r .cell-code}\nclass(merged$post.weekday)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"ordered\" \"factor\" \n```\n:::\n:::\n\n\n### Adding early comments:\n\nMeasuring how early comments impact engagement:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmerged<- merged %>%\n  mutate (e.rate = `Exit rate`*10000)\nsummary(lm(e.rate ~ log(Uniques) + author.sum +post.weekday +early.sum, data = merged))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nlm(formula = e.rate ~ log(Uniques) + author.sum + post.weekday + \n    early.sum, data = merged)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-2491.71  -146.36    15.88   188.10   638.62 \n\nCoefficients:\n                 Estimate Std. Error t value Pr(>|t|)    \n(Intercept)    -3587.5846   276.2872 -12.985  < 2e-16 ***\nlog(Uniques)    1138.5047    27.5061  41.391  < 2e-16 ***\nauthor.sum       -38.3691    15.4708  -2.480   0.0134 *  \npost.weekday.L   -14.2529    29.1268  -0.489   0.6248    \npost.weekday.Q   143.4069    28.7226   4.993 8.10e-07 ***\npost.weekday.C     5.1103    28.2598   0.181   0.8566    \npost.weekday^4    35.8574    27.9676   1.282   0.2004    \nearly.sum          1.5903     0.2998   5.305 1.66e-07 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 293.5 on 527 degrees of freedom\nMultiple R-squared:  0.7737,\tAdjusted R-squared:  0.7707 \nF-statistic: 257.4 on 7 and 527 DF,  p-value: < 2.2e-16\n```\n:::\n\n```{.r .cell-code}\nsummary(lm(e.rate ~ log(Uniques) + author.sum+early.sum, data = merged))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nlm(formula = e.rate ~ log(Uniques) + author.sum + early.sum, \n    data = merged)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-2538.89  -143.55    24.05   198.90   685.26 \n\nCoefficients:\n               Estimate Std. Error t value Pr(>|t|)    \n(Intercept)  -3634.7905   281.4951 -12.912  < 2e-16 ***\nlog(Uniques)  1144.2628    28.0370  40.813  < 2e-16 ***\nauthor.sum     -35.9680    15.6776  -2.294   0.0222 *  \nearly.sum        1.5193     0.3042   4.994 8.04e-07 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 299.6 on 531 degrees of freedom\nMultiple R-squared:  0.7623,\tAdjusted R-squared:  0.761 \nF-statistic: 567.6 on 3 and 531 DF,  p-value: < 2.2e-16\n```\n:::\n:::\n\n\nThe model's predictive value is pretty good (probably due to popularity\nbeing included) : 0.77. It also appears that this connection We can\ncheck it, by excluding the popularity, as see that R\\^2 drops\ndramatically:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(lm(e.rate ~ author.sum+early.sum, data = merged))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nlm(formula = e.rate ~ author.sum + early.sum, data = merged)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-3227.6  -410.9   -65.3   383.0  1613.4 \n\nCoefficients:\n             Estimate Std. Error t value Pr(>|t|)    \n(Intercept) 7634.2416   111.2795  68.604   <2e-16 ***\nauthor.sum   -92.0013    31.7347  -2.899   0.0039 ** \nearly.sum      0.5435     0.6163   0.882   0.3783    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 608.8 on 532 degrees of freedom\nMultiple R-squared:  0.01667,\tAdjusted R-squared:  0.01298 \nF-statistic:  4.51 on 2 and 532 DF,  p-value: 0.01142\n```\n:::\n:::\n\n\n\n# 4. Conlusion\n\nThis study explored the connection between user's online engagement and bolg's author engagement.  To do so, we also analyzed the impact of post popularity on engagement. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nknitr::include_graphics(\"C:\\\\Users\\\\Diana\\\\OneDrive - University Of Massachusetts Medical School\\\\Documents\\\\R\\\\R working directory\\\\DACSS\\\\603\\\\my study files for dacss603\\\\FP diagram .png\")\n```\n\n::: {.cell-output-display}\n![](../../my study files for dacss603/FP diagram .png){width=789}\n:::\n:::\n\n\nThe results showed that the post popularity is the major factor for online engagement and is negatively correlated with it. i.e. more popular posts tend to be less engaging.    \n\nWe also identified two groups of users, whose engagement is measured with different metrics. We explored how blog author's comments impact engagement of each group. We found  than there is no significant impact of authors engagement on users engagement.  Such characteristics, as post mood and blocked comments also showed no connection with engagement of either groups of users. \n\n\n\nWhile engagement metrics (exit rate and comments) did not show\nsignificant contribution, authors comment appeared significant in this\nmodel. - this is really out of place, i just don't want to lose this.\n\n# \n",
    "supporting": [
      "Final_Project_check_in_2_Diana_Rinker_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}