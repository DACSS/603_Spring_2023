{
  "hash": "7bdc49a2e2fd0431f7328bf362662bd1",
  "result": {
    "markdown": "---\ntitle: \"Homework 1 Solution\"\nauthor: \"Rosemary Pang\"\ndescription: \"The first homework on descriptive statistics and probability\"\ndate: \"03/01/2023\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - hw1\n  - desriptive statistics \n  - probability\n---\n\n\n# Question 1\n\n## a\n\nFirst, let's read in the data from the Excel file:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readxl)\nlibrary(dplyr, warn.conflicts = F)\nlibrary(magrittr)\ndf <- read_excel(\"_data/LungCapData.xls\")\n```\n:::\n\n\n\nThe distribution of LungCap looks as follows:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhist(df$LungCap, xlab = 'Lung Capacity', main = '', freq = F)\n```\n\n::: {.cell-output-display}\n![](HW1_solution_Pang_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\nThe histogram suggests that the distribution is close to a normal distribution. Most of the observations are close to the mean. Very few observations are close to the margins (0 and 15).\n\n## b\n\n\n::: {.cell}\n\n```{.r .cell-code}\nboxplot(LungCap ~ Gender, data = df)\n```\n\n::: {.cell-output-display}\n![](HW1_solution_Pang_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\nThe shape of the distribution is similar for males and females. The median, first quartile, third quartile lung capacity values all seem to be somewhat higher for males.\n\n## c\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>%\n  group_by(Smoke) %>%\n  summarize(LungCap = mean(LungCap))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2 × 2\n  Smoke LungCap\n  <chr>   <dbl>\n1 no       7.77\n2 yes      8.65\n```\n:::\n:::\n\n\nThe lung capacity for smokers seems to be higher than non-smokers. It goes against the common idea that smoking would hurt lung capacity.\n\n## d\n\n- Less than or equal to 13\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>%\n  filter(Age <= 13) %>%\n  group_by(Smoke) %>%\n  summarize(LungCap = mean(LungCap))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2 × 2\n  Smoke LungCap\n  <chr>   <dbl>\n1 no       6.36\n2 yes      7.20\n```\n:::\n:::\n\n\n- 14 to 15\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>%\n  filter(Age == 14 | Age == 15) %>%\n  group_by(Smoke) %>%\n  summarize(LungCap = mean(LungCap))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2 × 2\n  Smoke LungCap\n  <chr>   <dbl>\n1 no       9.14\n2 yes      8.39\n```\n:::\n:::\n\n\n- 16 to 17\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>%\n  filter(Age == 16 | Age == 17) %>%\n  group_by(Smoke) %>%\n  summarize(LungCap = mean(LungCap))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2 × 2\n  Smoke LungCap\n  <chr>   <dbl>\n1 no      10.5 \n2 yes      9.38\n```\n:::\n:::\n\n\n- Greater than or equal to 18\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>%\n  filter(Age >= 18) %>%\n  group_by(Smoke) %>%\n  summarize(LungCap = mean(LungCap))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2 × 2\n  Smoke LungCap\n  <chr>   <dbl>\n1 no       11.1\n2 yes      10.5\n```\n:::\n:::\n\n\n\n## e\n\nFor three out of the four groups, lung capacity if smaller for smokers.\nThis makes another explanation plausible.\nSmoking is inversely related to lung capacity, but older people both smoke more and have more lung capacity.\nThus, considering the relationship between smoking and lung capacity without looking at age makes the relationship look the opposite of what it is.\n\n\n# Question 2\n\nLet's recreate the data in the question in R.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntb <- tibble(\n  X = c(0, 1, 2, 3, 4),\n  Frequency = c(128, 434, 160, 64, 24)\n  )\n```\n:::\n\n\nStore the total number of observations, 810, into n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nn <- sum(tb$Frequency) \n```\n:::\n\n\n## a\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntb %>%\n  filter(X == 2) %>%\n  pull(Frequency) %>%\n  divide_by(n)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.1975309\n```\n:::\n:::\n\n\n## b\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntb %>%\n  filter(X < 2) %>%\n  pull(Frequency) %>%\n  sum() %>%\n  divide_by(n)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.6938272\n```\n:::\n:::\n\n\n\n## c\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntb %>%\n  filter(X <= 2) %>%\n  pull(Frequency) %>%\n  sum() %>%\n  divide_by(n)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.891358\n```\n:::\n:::\n\n\n## d\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntb %>%\n  filter(X > 2) %>%\n  pull(Frequency) %>%\n  sum() %>%\n  divide_by(n)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.108642\n```\n:::\n:::\n\n\n\n## e\n\nExpected number of prior convictions is just a weighted average of the number of prior convictions.\n\n- **Method 1:** Multiply every value with their frequency, then divide by total frequency i.e. (0 * 128 + 1 * 434 + 2 * 160 ......) / 810.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsum(tb$X * tb$Frequency) / n\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 1.28642\n```\n:::\n:::\n\n\n- **Method 2:** Multiply every value with their probility, sum them up.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntb %>%\n  mutate(probability = Frequency / n) -> tb\n\nprint(tb)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 3\n      X Frequency probability\n  <dbl>     <dbl>       <dbl>\n1     0       128      0.158 \n2     1       434      0.536 \n3     2       160      0.198 \n4     3        64      0.0790\n5     4        24      0.0296\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsum(tb$X * tb$probability)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 1.28642\n```\n:::\n:::\n\n\n- **Method 3:** Recreate the whole sample (a vector that has 128 zeroes, 434 ones, 160 twos, ....) with a total length/size of 810. Take the mean.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsample <- c(rep(0, 128), rep(1, 434), rep(2, 160), rep(3, 64), rep(4, 24))\nmean(sample)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 1.28642\n```\n:::\n:::\n\n\n## f\n\n- **Method 1:** Let's start from the end: we have the sample, just call `var()` and `sd()`\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncat('Variance:', var(sample))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nVariance: 0.8572937\n```\n:::\n\n```{.r .cell-code}\ncat('\\nStandard Deviation:', sd(sample))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nStandard Deviation: 0.9259016\n```\n:::\n:::\n\n**Method 2:** Manually apply the formula using weights.\n\nStandard deviation is square root of variance. So let's calculate variance first.\nFor that we need the mean.\nLet's pull the expected value from the previous section:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nm <- sum(tb$X * tb$Frequency) / n\n```\n:::\n\n\nFor every observation, we'll need the squared difference from mean (squared deviation from mean).\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntb %>%\n  mutate(sq_deviation = (X - m)^2) -> tb \nprint(tb)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 4\n      X Frequency probability sq_deviation\n  <dbl>     <dbl>       <dbl>        <dbl>\n1     0       128      0.158        1.65  \n2     1       434      0.536        0.0820\n3     2       160      0.198        0.509 \n4     3        64      0.0790       2.94  \n5     4        24      0.0296       7.36  \n```\n:::\n:::\n\n\nThen, we can now multiply them with probability.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsum(tb$sq_deviation * tb$probability)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.8562353\n```\n:::\n:::\n\n\nThis gives us the 'population' variance. If we wanted the 'sample' variance, what the `var()` function does, we could manually apply the Bessel's correction:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvariance <- sum(tb$sq_deviation * tb$probability) * (n / (n-1))\nprint(variance)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.8572937\n```\n:::\n:::\n\n\nStandard deviation is then just the square root:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsqrt(variance)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.9259016\n```\n:::\n:::\n\n\nThis replicated what we found directly using the sample.\n\n\n\n\n\n\n",
    "supporting": [
      "HW1_solution_Pang_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}