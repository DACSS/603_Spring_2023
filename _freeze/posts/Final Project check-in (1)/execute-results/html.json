{
  "hash": "7e76fd602903e7ee46989d7492ac919b",
  "result": {
    "markdown": "---\ntitle: \"Final Project check-in (1) \"\nauthor: \"Diana Rinker\"\ndescription: \"Final project (1)\"\ndate: \"3/27/2023\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\neditor: \n  markdown: \n    wrap: 72\n---\n\n\n## DACSS 603, spring 2023\n\n## Final Project check-in (1), Diana Rinker.\n\n# Online engagement \"\n\n\nIt is well known that online engagement with the web resource is a \nhighly valuable metric and is driving site revenue. However, engagement\nand popularity might also be associated with other factors, that\nwebsties are trying to avoid, such as online violence, inappropriate\nbehavior and misinformation.This research project is exploring whith factos impact readers engagement\nin social media conversations.\n\nTo do that I will use the data from an online blog on the news\nwebsite. The author of this blog is posting weekly articles about\ninterpersonal relationships, that are formulated as a letter to to the\nauthor, where the author gives an advice about the situation. Readers\nare free to comment under each post, but cannot make their own posts.\n\nUsing this data set, I will explore how engagement of readers of a news\nblog connected with variety of factors, such blogs's author engagement ,\ntopic of the post, source of readers and readers inappropriate online\nbehavior.\n\nMy research question is: Does the authors engagement in the conversation\naround the post makes readers more engaged and promotes positive\ninteractions among them?\n\n**DV:** My dependent construct is **\"user's engagement**\", I will\nmeasure users' engagement at the level of individual post, using the\nfollowing variables\n\nL1 - page viewers View page\n\nL2 - page readers \\* Reveal letter \\* Reveal comments\n\nL3 - logged in \\* Login / sign up \\* Up / down vote\n\nL4 - commenter Comment\n\n**IV:** My main independent variable is **Blog's author engagement.** I\nwill measure authors engagement as the factor variable, with the\nfollowing levels:\n\nA. Unspecified comment\n\nB. Featured comment\n\nC. Engagement in conversation\n\nTo control for **confounders,** I will also measure the follwing\nvariables:\n\n1.  Topic of the post (\"post tag\"), categorical variable.\n\n2.  Source of the readers, also categorical variable.\n\n3.  Mood of the conversation , derivative continuous variable calculated\n    as the ratio of \"likes\" to \"dislikes\".\n\n4.  Blocked and flagged comments.\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'dplyr'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──\n✔ tibble  3.1.8     ✔ purrr   1.0.1\n✔ tidyr   1.3.0     ✔ stringr 1.5.0\n✔ readr   2.1.4     ✔ forcats 1.0.0\n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\n```\n:::\n:::\n\n\n# Data\n\nThe data for analysis contains comments of all posts for 2022.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngetwd()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"C:/Users/Diana/OneDrive - University Of Massachusetts Medical School/Documents/R/R working directory/DACSS/603/603_Spring_2023/posts\"\n```\n:::\n\n```{.r .cell-code}\nraw <- as_tibble (read_csv(\"C:\\\\Users\\\\Diana\\\\OneDrive - University Of Massachusetts Medical School\\\\Documents\\\\R\\\\R working directory\\\\DACSS\\\\603\\\\my study files for dacss603\\\\globe\\\\LL Comment Data\\\\iaexport03242023nb_output.csv\"))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 1810511 Columns: 16\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (6): content, user_name, display_name, image_url, email, approved\ndbl  (6): message_id, post_id, user_id, parent, absolute_likes, absolute_dis...\nlgl  (3): email_verified, created_at, private_profile\ndttm (1): written_at\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n```{.r .cell-code}\ncomments.data<-raw \ncolnames (comments.data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"content\"           \"message_id\"        \"post_id\"          \n [4] \"user_id\"           \"user_name\"         \"display_name\"     \n [7] \"image_url\"         \"email\"             \"email_verified\"   \n[10] \"created_at\"        \"private_profile\"   \"approved\"         \n[13] \"written_at\"        \"parent\"            \"absolute_likes\"   \n[16] \"absolute_dislikes\"\n```\n:::\n\n```{.r .cell-code}\nhead(comments.data$created_at)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] NA NA NA NA NA NA\n```\n:::\n\n```{.r .cell-code}\nhead(comments.data$written_at)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"2012-08-10 09:31:55 UTC\" \"2012-08-10 15:30:48 UTC\"\n[3] \"2012-08-10 09:32:52 UTC\" \"2011-01-04 12:39:46 UTC\"\n[5] \"2012-08-12 19:19:35 UTC\" \"2011-01-05 09:26:07 UTC\"\n```\n:::\n\n```{.r .cell-code}\ncomments.data <-comments.data%>%\n              mutate(com.year = format(written_at,format = \"%Y\" ))\nhead(comments.data$com.year)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"2012\" \"2012\" \"2012\" \"2011\" \"2012\" \"2011\"\n```\n:::\n\n```{.r .cell-code}\ndim(comments.data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 1810511      17\n```\n:::\n\n```{.r .cell-code}\ncomments.2022 <-comments.data  %>%\n              filter(com.year ==\"2022\" )\ndim(comments.2022)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 45020    17\n```\n:::\n:::\n\n\nTo answer my research question I will need three datasets that are\ncoming from a different sources.\n\n-   The first dataset contains comments and their attributes.\n\n-   The second dataset contains posts and their attributes\n\n-   The third dataset contains website analytics, such as  page views, scrolls,\n    viewers' sources and so on.\n\nTo get better understanding of my data, I will review variables:\n\n### Number of comments, distributed by month\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrouped<-comments.2022 %>%\n  group_by (post_id)%>%\n  summarise(n.comments=n(), \n            post.month = format(first(written_at),format = \"%m\" ))\ngrouped\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 383 × 3\n    post_id n.comments post.month\n      <dbl>      <int> <chr>     \n 1 27068003        176 12        \n 2 27068009        127 12        \n 3 27068015         96 12        \n 4 27068021        137 12        \n 5 27068027        148 12        \n 6 27068033        210 12        \n 7 27068039        169 12        \n 8 27068045        207 12        \n 9 27068051        137 12        \n10 27068057        194 12        \n# … with 373 more rows\n```\n:::\n\n```{.r .cell-code}\nggplot(grouped, mapping = aes(x=post.month, y=n.comments, fill=post.month))+\n  geom_boxplot() +\n  labs(title = \"Density distribution of comments per post \", y = \"Number of comments\" )+\n  scale_y_continuous(breaks = seq (from=0, to= 10000, by= 100)) \n```\n\n::: {.cell-output-display}\n![](Final-Project-check-in--1-_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n\n```{.r .cell-code}\n   # coord_flip()\n```\n:::\n\n\nThis graph demonstrates significant variance in amount or comments per post  over 12 months of 2022. \n\n\n\n### Dependent variable. User engagement.\n\nMy dependent construct is **user's engagement**, I will measure users\nengagement at the level of individual post.\n\nEngagement metrics\n\nL1 - page viewers View page\n\nL2 - page readers\n\n\\* Reveal letter\n\n\\* Reveal comments\n\nL3 - logged in\n\n\\* Login / sign up\n\n\\* Up / down vote\n\nL4 - commenter Comment\n\n### Mood of the post.\n\nis a numerical variable.Since each comment has a certain number of \"thumbs up\" or \"thumbs down\". I will use this variable to calculate overall \"mood\" of the post.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# grouped<-comments.2022 %>%\n#   group_by (post_id)%>%\n#   summarise(n.comments=n(), \n#             post.month = format(first(written_at),format = \"%m\" ),\n#             likes.sum = sum(absolute_likes), \n#             dislikes.sum=sum (absolute_dislikes))\n# grouped <-  grouped%>%\n#    mutate(mood =  likes.sum/dislikes.sum)  \n#  grouped <- grouped %>%\n#   mutate(mood = ifelse(is.nan(likes.sum/dislikes.sum), 0, likes.sum/dislikes.sum))\n#  \n grouped<-comments.2022 %>%\n      group_by (post_id)%>%\n      summarise(n.comments=n(), \n            post.month = format(first(written_at),format = \"%m\" ),\n            likes.sum = sum(absolute_likes), \n            dislikes.sum=sum (absolute_dislikes),\n            blocked.sum= sum(approved==\"blocked\"),\n            pct.positive =(sum(absolute_likes)/(sum(absolute_likes)+sum(absolute_dislikes)))*100,\n            pct.negative =-1((sum(absolute_dislikes)/(sum(absolute_likes)+sum(absolute_dislikes)))*100)               \n  )\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in `summarise()`:\nℹ In argument: `pct.negative = -...`.\nℹ In group 1: `post_id = 27068003`.\nCaused by error:\n! attempt to apply non-function\n```\n:::\n\n```{.r .cell-code}\nggplot(grouped, mapping = aes( x=pct.positive))+\n  geom_baoxplot()  +\n  labs(title = \"Overall mood distribution\" )\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in geom_baoxplot(): could not find function \"geom_baoxplot\"\n```\n:::\n:::\n\nThan I visualize distribution of mood by months, nd overal variability of a mood score: \n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(grouped, mapping = aes(x= post.month, y=mood.score))+\n  geom_boxplot()  +\n  labs(title = \"Distribution of mood by month \", y = \"Post mood\" )\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in `geom_boxplot()`:\n! Problem while computing aesthetics.\nℹ Error occurred in the 1st layer.\nCaused by error in `FUN()`:\n! object 'mood.score' not found\n```\n:::\n\n```{.r .cell-code}\nggplot(grouped, mapping = aes( y=mood.score))+\n  geom_boxplot()  +\n  labs(title = \"Overall mood distribution \" )\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in `geom_boxplot()`:\n! Problem while computing aesthetics.\nℹ Error occurred in the 1st layer.\nCaused by error in `FUN()`:\n! object 'mood.score' not found\n```\n:::\n:::\n\nThis is  showing that there are \n\n\n\n\n\n\n\nWe can also check the connection between positive and negative sentiment:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nx.lm<-lm(pct.positive ~ pct.negative, data = grouped)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in eval(predvars, data, env): object 'pct.positive' not found\n```\n:::\n\n```{.r .cell-code}\nplot ( data = grouped, pct.negative ~ pct.positive )\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in eval(predvars, data, env): object 'pct.negative' not found\n```\n:::\n:::\n\nIt falls perfectly on  linear regression line, with positive and negative values strongly negatively correlated. \n\n\n\n### Blocked comments per post.\nNow I will visualize amount of blocked comments per post: \n\n\n::: {.cell}\n\n```{.r .cell-code}\ncolnames(comments.2022)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"content\"           \"message_id\"        \"post_id\"          \n [4] \"user_id\"           \"user_name\"         \"display_name\"     \n [7] \"image_url\"         \"email\"             \"email_verified\"   \n[10] \"created_at\"        \"private_profile\"   \"approved\"         \n[13] \"written_at\"        \"parent\"            \"absolute_likes\"   \n[16] \"absolute_dislikes\" \"com.year\"         \n```\n:::\n\n```{.r .cell-code}\nggplot(grouped, mapping = aes(x= post.month, y=blocked.sum))+\n  geom_boxplot() +\n labs(title = \"Blockeed comments per month\")\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in `geom_boxplot()`:\n! Problem while computing aesthetics.\nℹ Error occurred in the 1st layer.\nCaused by error in `FUN()`:\n! object 'blocked.sum' not found\n```\n:::\n:::\n\n\n\n### Blocked comments and Post mood: \n\n::: {.cell}\n\n```{.r .cell-code}\nplot(blocked.sum ~ mood.score, data= grouped )\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in eval(predvars, data, env): object 'blocked.sum' not found\n```\n:::\n\n```{.r .cell-code}\nsummary(grouped)  \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n    post_id           n.comments     post.month       \n Min.   :27068003   Min.   :  1.0   Length:383        \n 1st Qu.:27068576   1st Qu.:  1.0   Class :character  \n Median :27069149   Median :149.0   Mode  :character  \n Mean   :27070403   Mean   :117.5                     \n 3rd Qu.:27070634   3rd Qu.:187.0                     \n Max.   :27090293   Max.   :313.0                     \n```\n:::\n\n```{.r .cell-code}\nfit <- lm(blocked.sum ~ mood.score, data = grouped)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in eval(predvars, data, env): object 'blocked.sum' not found\n```\n:::\n\n```{.r .cell-code}\nsum(is.na(grouped$mood.score))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Unknown or uninitialised column: `mood.score`.\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0\n```\n:::\n\n```{.r .cell-code}\nsummary(fit)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in summary(fit): object 'fit' not found\n```\n:::\n:::\n\n\n### \"created_at\"\n\nThis variable indicates the date of the comment. Using the range of the\ndates per post, I can estimate how long each post was in active\ndiscussion. Later I can compare it with the views of the same post\ncoming from the third dataset.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# MG.comments<-comments.2022[grep(\"MeredithGoldstein\", comments.2022$user_name, ignore.case = TRUE), ]\n\ncomments.2022$user_name<-  ifelse (is.na(comments.2022$user_name), 0, comments.2022$user_name)\ncomments.2022$mg.comment<-  ifelse (comments.2022$user_name==\"MeredithGoldstein\", 1, 0)\n\ndim(comments.2022)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 45020    18\n```\n:::\n\n```{.r .cell-code}\ngrouped<-comments.2022 %>%\n  group_by (post_id)%>%\n  summarise(n.comments=n(), \n            post.month = format(first(written_at),format = \"%m\" ),\n            likes.sum = sum(absolute_likes), \n            dislikes.sum=sum (absolute_dislikes),\n            blocked.sum= sum(approved==\"blocked\"), \n            pct.positive =(sum(absolute_likes)/(sum(absolute_likes)+sum(absolute_dislikes)))*100,\n            pct.negative =(sum(absolute_dislikes)/(sum(absolute_likes)+sum(absolute_dislikes)))*100,\n            mg.post =sum(mg.comment)               \n  )\ngrouped<-grouped%>%\n  mutate(mood.score = pct.positive/pct.negative)  \ngrouped\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 383 × 10\n    post_id n.comments post.mo…¹ likes…² disli…³ block…⁴ pct.p…⁵ pct.n…⁶ mg.post\n      <dbl>      <int> <chr>       <dbl>   <dbl>   <int>   <dbl>   <dbl>   <dbl>\n 1 27068003        176 12           1185     169       1    87.5    12.5       0\n 2 27068009        127 12            624      83       3    88.3    11.7       0\n 3 27068015         96 12            427      87       2    83.1    16.9       0\n 4 27068021        137 12            739      92       7    88.9    11.1       0\n 5 27068027        148 12            634     275       2    69.7    30.3       0\n 6 27068033        210 12           1104     261       9    80.9    19.1       0\n 7 27068039        169 12            863     155       0    84.8    15.2       0\n 8 27068045        207 12            988     192       2    83.7    16.3       0\n 9 27068051        137 12            657      94       0    87.5    12.5       0\n10 27068057        194 12            805     259       1    75.7    24.3       0\n# … with 373 more rows, 1 more variable: mood.score <dbl>, and abbreviated\n#   variable names ¹​post.month, ²​likes.sum, ³​dislikes.sum, ⁴​blocked.sum,\n#   ⁵​pct.positive, ⁶​pct.negative\n```\n:::\n\n```{.r .cell-code}\nclass(grouped$mg.post)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"numeric\"\n```\n:::\n\n```{.r .cell-code}\nggplot(grouped, mapping = aes(mg.post))+\n  geom_boxplot()  +\n  labs(title = \"Authors comments \", y = \"comments per post .per month\" )\n```\n\n::: {.cell-output-display}\n![](Final-Project-check-in--1-_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n\n```{.r .cell-code}\ngrouped$mg.com<-  ifelse (grouped$mg.post>0, 1, 0)\n\ngrouped$mg.com <- as.factor(grouped$mg.com)\nggplot(grouped, mapping = aes(y=mood.score, x=mg.com))+\n  geom_boxplot() \n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 131 rows containing non-finite values (`stat_boxplot()`).\n```\n:::\n\n::: {.cell-output-display}\n![](Final-Project-check-in--1-_files/figure-html/unnamed-chunk-9-2.png){width=672}\n:::\n:::\n\n\n### \"post_id\"\n\nVariable allowing me to connect this dataset with another one with the\npost informnation,\n",
    "supporting": [
      "Final-Project-check-in--1-_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}