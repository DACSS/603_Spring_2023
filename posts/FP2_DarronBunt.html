<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.361">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Darron Bunt">
<meta name="dcterms.date" content="2023-05-13">
<meta name="description" content="Final Project Check In 2 - Darron Bunt">

<title>Check In 2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../images/DACSS_Round_Network.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<meta name="twitter:title" content="Check In 2">
<meta name="twitter:description" content="Final Project Check In 2 - Darron Bunt">
<meta name="twitter:creator" content="@UMassDACSS">
<meta name="twitter:site" content="@UMassDACSS">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../images/UMass White Wordmark Horiz.png" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://dacss.github.io/603_Spring_2023/" rel="" target="">
 <span class="menu-text">Spring 2023 Posts</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html" rel="" target="">
 <span class="menu-text">Contributors</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://umass.edu/sbs/dacss" rel="" target="">
 <span class="menu-text">DACSS</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://dacss.github.io/603_Spring_2023/" rel="" target=""><i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Check In 2</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
  <div class="quarto-categories">
    <div class="quarto-category">finalproject</div>
  </div>
  </div>

<div>
  <div class="description">
    Final Project Check In 2 - Darron Bunt
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Darron Bunt </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">May 13, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Research Question</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Hypothesis</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Data Collection</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false">Variables of Interest</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>In April 2013, Doug J. Chung published a research paper<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> endeavoring to quantify and model the impact of the so-called “Flutie Effect” - the spillover impact that athletics has on the quantity and quality of applicants to US colleges (named after Boston College quarterback Doug Flutie, who in 1984 threw a Hail Mary touchdown pass to secure victory with six seconds in a game against the University of Miami, qualifying the team to compete in the Cotton Bowl<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>). The legacy of Flutie’s on-field success has been credited with catalyzing a 30% increase in undergraduate applications at Boston College, though institutional officials have argued that other, non-athletic factors were the “true” reason behind the increase. This trend of increased applications after prominent athletic successes, however, has been observed at other institutions including Georgetown, Northwestern, Boise State, and Texas Christian University.</p>
<p>Chung was able to find a statistically significant relationship between athletic success and both the quantity (number of applications) and quality (SAT scores of those applicants) of applicants to a given institution; his findings included that when a school rises from being classified as a mediocre football program to great one, applications rise by 18.7%<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>.</p>
<p>While in my job I do not focus directly on applications to US colleges, I do work with on campus marketing and communications leaders, and generate insights from data derived from online conversation about their schools so that they can better understand that conversation in ways that can help them to develop, refine, and align their communications strategies with the goals of the institutions that they serve<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>. A trend I frequently observe while analyzing this online conversation data is the impact that athletics has on the volume and reach of mentions related to schools.</p>
<p>In benchmarking work that we’ve undertaken in order to better understand online conversation trends in higher education, we’ve found that, on average, 63% of all online conversation related to schools is about their athletics - and for some schools, this proportion can be as high as 91%<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a>. And while the proportion of overall online conversation relating to different colleges is already quite high, there are certain significant events within the realm of college sports that send mention volume even higher. One such event is March Madness.</p>
<p>Run by the NCAA every year during the month of March, the men’s version of the March Madness tournament is widely regarded as one of biggest American sporting events. 68 teams participate in the three-week long single-elimination tournament, which produced $1.14 billion in annual revenue for the NCAA in 2022<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a>. One of the most exciting parts of the tournament are the “Cinderella stories”; teams with a low ranking that manage to eliminate higher ranked teams.</p>
<p>In 2022, I became interested in developing a greater understanding of the impact that March Madness could have on a school’s online conversation volume and began tracking that year’s Cinderella - the Saint Peter’s College Peacocks, a #15 seed that made it all the way to the Elite 8. In their Sweet 16 game against Purdue, Saint Peter’s had more mentions <em>per minute</em> than their average monthly volume for the prior five months. Their total mention volume during the month of March was <em>12,380 times</em> more than that same monthly average<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a>.</p>
<p>After completing that work, I became increasingly curious about how participation in the tournament affected conversation volume and reach for all teams, not just Cinderella stories. I wanted to investigate the factors that might influence more/less conversation volume for any given team, and indeed, whether conversation about the team was the only facet of conversation about a college that increased - or if the school as a whole received more conversation overall. I became very interested in learning more about the overall trends that relate to participation in events like March Madness and how we could use that information to provide strategic insights to colleges across the US.</p>
<p>Bringing it back to the Flutie Effect - if on-field athletic success can impact enrollment at US colleges, it stands to reason that online conversation about athletic success (or athletic events in general) could have a similar impact. Accordingly, it would be prudent to further explore the impact an event like the men’s March Madness tournament has on online conversation volume for US colleges.</p>
<p>Specifically, the research question that I want to explore is:</p>
<p><strong>What impact does participation in the men’s March Madness tournament have on online conversation about the schools involved?</strong></p>
<p>And more specifically, some nuances to this question that I want to consider are:</p>
<ul>
<li><p>How does mention volume differ when schools are participating in the tournament?</p>
<ul>
<li>Is there a difference in reach for schools participating in the tournament?</li>
<li>Is there a correlation between increase in mention volume and increase in reach?</li>
</ul></li>
<li><p>What is the baseline of conversation volume/reach increase that can be expected when a team participates in the tournament?</p></li>
<li><p>What variables contribute to increased/decreased mention volume/reach during the tournament?</p>
<ul>
<li>Size of school</li>
<li>Major / mid-major</li>
<li>Round of the tournament</li>
<li>Favorite / underdog</li>
<li>Win/Loss</li>
<li>Upset</li>
<li>Time of day</li>
</ul></li>
<li><p>If there is a change in mention volume/reach during the tournament, how long does this change last?</p>
<ul>
<li>Is this length of time similar or different for volume and reach?</li>
<li>Do the same variables that contribute to increased/decreased mention volume also impact the length of that increase?</li>
</ul></li>
</ul>
<p>Answers to these questions will provide a better understanding of the overall impact that events such as the men’s March Madness tournament have on conversation volume/reach and can subsequently serve to inform strategies and tactics that can be implemented by marketing and communications professionals who focus on digital media in higher education. That is, schools can use this information to develop further hypotheses to be tested that would facilitate a goal of leveraging and maximizing the impact of athletic participation and success on their online conversation.</p>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p>My overarching hypothesis is that <strong>participation in the men’s March Madness tournament increases online conversation about the schools that are involved.</strong> I further hypothesize that:</p>
<ul>
<li>There is a correlation between increases in mention volume and overall/average reach; that is, it’s not just the number of mentions about each school that increases, but also the number of people who see those mentions.</li>
<li>The increase in conversation (volume and reach) for each school will be influenced by seven factors: school size, classification as a major or mid-major school, which round of the tournament the game happens during, whether the team was the favorite (ranked higher) or the underdog (ranked lower), whether the team won or lost, whether the game was considered a major upset, and the time of day the game took place.</li>
<li>The change in mention volume/reach will return to baseline within a matter of days after a team’s exit from the tournament.</li>
<li>The variables I hypothesize contribute to variations in how volume/reach increase will <strong>not</strong> also impact the length of that increase.</li>
</ul>
<p><strong>What impact does participation in the men’s March Madness tournament have on online conversation about the schools involved?</strong></p>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<p>The data used for this project was collected by me using the Brandwatch Consumer Research platform. I first wrote Boolean to search for mentions about all 68 schools with teams in the men’s March Madness tournament, using the same parameters to construct each one (specifically, the school’s full name, shortened name(s), acronym(s), mascot(s), website URL, athletics website URL, and Twitter usernames for the school’s flagship, flagship athletics, and men’s basketball team accounts). The Boolean was then used to run a query within Brandwatch to pull all relevant, retrievable online mentions for the 68 schools made between January 1 and April 30 2023. This search returned 8,099,045 mentions.</p>
<p>One of the features included in Brandwatch is the ability to segment data into categories, and this can be done in a wide range of manners (using Boolean or a variety of pre-built parameters such as content sources and mention types). I used this feature to create a variety of categories that would be necessary for me to be able to parse the full dataset into manageable chunks that could be used to answer my research question.</p>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<p>First I need to do some data manipulation in order to create my variables of interest.</p>
<section id="data-manipulation-for-mention-volume" class="level4">
<h4 class="anchored" data-anchor-id="data-manipulation-for-mention-volume">Data Manipulation For Mention Volume</h4>
<p>I need to calculate the average daily volume for the following time spans: * Outside of Tournament Play (January 1 to March 13; two days after elimination to May 12) * During the Tournament (March 14 to day after elimination) * Before the Tournament (January 1 to March 13) * After the Tournament (Two days after elimination to May 12)</p>
<p>And then I need to add columns with the daily volume for the following times: * Post Elimination (two days after) * Post Plus 1 (three days after) * Post Plus 2 (four days after) * Post Plus 3 (five days after)</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in data</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>TournamentVariables <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"_data/MMVariables.csv"</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>MMVolume <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"_data/MentionsPerDayALL.csv"</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Join data</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>MMVolumeVar <span class="ot">&lt;-</span> MMVolume <span class="sc">%&gt;%</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(TournamentVariables, <span class="at">by =</span> <span class="st">"School"</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate pre-tournament average daily volume </span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>MMVolumeVar<span class="sc">$</span>VolBefore <span class="ot">&lt;-</span> (<span class="fu">round</span>(<span class="fu">rowMeans</span>(MMVolumeVar[, <span class="dv">2</span><span class="sc">:</span><span class="dv">73</span>]), <span class="at">digits =</span> <span class="dv">0</span>))</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function to pull the rows needed to calculate "during tournament" for each of the schools</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>fun1 <span class="ot">&lt;-</span> <span class="cf">function</span>(row) {</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  start_col1 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[<span class="dv">134</span>])  <span class="co"># Convert the value to a numeric column index</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  end_col1 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[<span class="dv">135</span>])    <span class="co"># Convert the value to a numeric column index</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>  values1 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[start_col1<span class="sc">:</span>end_col1]) <span class="co"># The rows to calculate the average</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  average1 <span class="ot">&lt;-</span> (<span class="fu">round</span>(<span class="fu">mean</span>(values1, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">digits =</span> <span class="dv">0</span>))</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(average1)</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Return the average daily volume for "during tournament" for each school </span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>MMVolumeVar<span class="sc">$</span>VolDuring <span class="ot">&lt;-</span> <span class="fu">apply</span>(MMVolumeVar, <span class="dv">1</span>, fun1)</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function to pull the rows needed to calculate "after tournament" for each of the schools</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>fun2 <span class="ot">&lt;-</span> <span class="cf">function</span>(row) {</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>  start_col2 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[<span class="dv">136</span>])  <span class="co"># Convert the value to a numeric column index</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>  end_col2 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[<span class="dv">137</span>])    <span class="co"># Convert the value to a numeric column index</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>  values2 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[start_col2<span class="sc">:</span>end_col2]) <span class="co"># The rows to calculate the average</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>  average2 <span class="ot">&lt;-</span> (<span class="fu">round</span>(<span class="fu">mean</span>(values2, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">digits =</span> <span class="dv">0</span>))</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(average2)</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Return the average daily volume for "during tournament" for each school </span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>MMVolumeVar<span class="sc">$</span>VolAfter <span class="ot">&lt;-</span> <span class="fu">apply</span>(MMVolumeVar, <span class="dv">1</span>, fun2)</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function to pull the rows needed for post-elimination volume </span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>fun3 <span class="ot">&lt;-</span> <span class="cf">function</span>(row) {</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>  column_index3 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[<span class="dv">136</span>])  <span class="co"># Convert the value to a numeric column index</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>  value3 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[column_index3])  <span class="co"># Get the value from the specified column</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(value3)</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Return the post-elimination day volume for each school </span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>MMVolumeVar<span class="sc">$</span>VolPostElim <span class="ot">&lt;-</span> <span class="fu">apply</span>(MMVolumeVar, <span class="dv">1</span>, fun3)</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function to pull the rows needed for non-tournament volume</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>fun14 <span class="ot">&lt;-</span> <span class="cf">function</span>(row) {</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>  start_col14 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[<span class="dv">142</span>])    <span class="co"># Start column index for range 1</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>  end_col14 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[<span class="dv">143</span>])      <span class="co"># End column index for range 1</span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>  start_col14a <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[<span class="dv">140</span>])    <span class="co"># Start column index for range 2</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>  end_col14a <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[<span class="dv">141</span>])      <span class="co"># End column index for range 2</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>  values14 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[start_col14<span class="sc">:</span>end_col14])    <span class="co"># Values for range 1</span></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>  values14a <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[start_col14a<span class="sc">:</span>end_col14a])    <span class="co"># Values for range 2</span></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>  values14b <span class="ot">&lt;-</span> <span class="fu">c</span>(values14, values14a)    <span class="co"># Combine the values from both ranges</span></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>  average14 <span class="ot">&lt;-</span> (<span class="fu">round</span>(<span class="fu">mean</span>(values14b, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">digits =</span> <span class="dv">0</span>))</span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(average14)</span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a><span class="co"># Return the average non-tournament daily volume for each school </span></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>MMVolumeVar<span class="sc">$</span>VolNonTourn <span class="ot">&lt;-</span> <span class="fu">apply</span>(MMVolumeVar, <span class="dv">1</span>, fun14) </span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function to pull the rows needed for post-elimination +1 volume </span></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>fun4 <span class="ot">&lt;-</span> <span class="cf">function</span>(row) {</span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>  column_index4 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[<span class="dv">137</span>])  <span class="co"># Convert the value to a numeric column index</span></span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>  value4 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[column_index4])  <span class="co"># Get the value from the specified column</span></span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(value4)</span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a><span class="co"># Return the post-elimination +1 volume for each school </span></span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a>MMVolumeVar<span class="sc">$</span>VolPostElim1 <span class="ot">&lt;-</span> <span class="fu">apply</span>(MMVolumeVar, <span class="dv">1</span>, fun4)</span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function to pull the rows needed for post-elimination +2 volume </span></span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a>fun5 <span class="ot">&lt;-</span> <span class="cf">function</span>(row) {</span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>  column_index5 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[<span class="dv">138</span>])  <span class="co"># Convert the value to a numeric column index</span></span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>  value5 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[column_index5])  <span class="co"># Get the value from the specified column</span></span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(value5)</span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a><span class="co"># Return the post-elimination +2 volume for each school </span></span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a>MMVolumeVar<span class="sc">$</span>VolPostElim2 <span class="ot">&lt;-</span> <span class="fu">apply</span>(MMVolumeVar, <span class="dv">1</span>, fun5)</span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function to pull the rows needed for post-elimination +3 volume </span></span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a>fun6 <span class="ot">&lt;-</span> <span class="cf">function</span>(row) {</span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a>  column_index6 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[<span class="dv">139</span>])  <span class="co"># Convert the value to a numeric column index</span></span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a>  value6 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[column_index6])  <span class="co"># Get the value from the specified column</span></span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(value6)</span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a><span class="co"># Return the post-elimination +3 volume for each school </span></span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a>MMVolumeVar<span class="sc">$</span>VolPostElim3 <span class="ot">&lt;-</span> <span class="fu">apply</span>(MMVolumeVar, <span class="dv">1</span>, fun6)</span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a data frame with the columns for the calculated means</span></span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a>MMVolAvgs <span class="ot">&lt;-</span> MMVolumeVar <span class="sc">%&gt;%</span></span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(School, VolDuring, VolNonTourn, VolBefore, VolAfter, VolPostElim,  VolPostElim1, VolPostElim2, VolPostElim3)</span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a>MMVolAvgs</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 68 × 9
   School      VolDuring VolNonTourn VolBefore VolAfter VolPostElim VolPostElim1
   &lt;chr&gt;           &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;
 1 University…       786         259       311      224         239          208
 2 University…      2782        1312      1393     1084        1377          791
 3 Arizona St…      2435        1318      1467     1025         964         1086
 4 Duke Unive…      4390        2127      2430     1434        1330         1537
 5 Utah State…       718         295       353      139         147          131
 6 University…      3623        1440      1839     1058        1252          865
 7 North Caro…       963         857       973      506         327          684
 8 University…      5826        1477      1557     2411        2715         2107
 9 Providence…       696         359       393     1262         269         2255
10 Xavier Uni…      1215         351       419      218         212          224
# ℹ 58 more rows
# ℹ 2 more variables: VolPostElim2 &lt;dbl&gt;, VolPostElim3 &lt;dbl&gt;</code></pre>
</div>
</div>
<p>This data frame shows:</p>
<ul>
<li>Average daily volume
<ul>
<li>during the tournament</li>
<li>outside of the tournament</li>
<li>before the tournament</li>
<li>after the tournament</li>
</ul></li>
<li>Daily volume
<ul>
<li>two days after elimination</li>
<li>three days after elimination</li>
<li>four days after elimination</li>
<li>five days after elimination</li>
</ul></li>
</ul>
</section>
<section id="data-manipulation-for-independent-variables-and-game-day-volume" class="level4">
<h4 class="anchored" data-anchor-id="data-manipulation-for-independent-variables-and-game-day-volume">Data Manipulation for Independent Variables and Game Day Volume</h4>
<p>Independent variables include:</p>
<ul>
<li>Game Date</li>
<li>Round</li>
<li>Seed</li>
<li>Is Major</li>
<li>Is Favorite</li>
<li>Is Winner</li>
<li>Is Upset</li>
<li>Favorite Winner</li>
<li>Underdog Winner</li>
<li>Time of Day</li>
</ul>
<p>And I will be also adding game day volume during this step.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in game scores, dates, etc.</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>DateAndTeam <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"_data/MBBMMGameData.csv"</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>DateAndTeam<span class="sc">$</span>GameDate <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(DateAndTeam<span class="sc">$</span>Date, <span class="at">format =</span> <span class="st">"%m/%d/%Y"</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>DateAndTeam<span class="sc">$</span>Time <span class="ot">&lt;-</span> DateAndTeam<span class="sc">$</span>Time <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" ET"</span>, <span class="st">""</span>, DateAndTeam<span class="sc">$</span>Time)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>DateAndTeam<span class="sc">$</span>Time <span class="ot">&lt;-</span> <span class="fu">strptime</span>(DateAndTeam<span class="sc">$</span>Time, <span class="at">format=</span><span class="st">"%I:%M%p"</span>)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>DateAndTeam<span class="sc">$</span>Time <span class="ot">&lt;-</span> <span class="fu">format</span>(DateAndTeam<span class="sc">$</span>Time, <span class="at">format =</span> <span class="st">"%H:%M:%S"</span>)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Use GameDate to create a TournamentRound variable</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>DateRoundTeam <span class="ot">&lt;-</span> DateAndTeam <span class="sc">%&gt;%</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TournamentRound =</span> <span class="fu">case_when</span>(</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">&gt;=</span> <span class="st">"2023-03-14"</span> <span class="sc">&amp;</span> GameDate <span class="sc">&lt;=</span> <span class="st">"2023-03-15"</span> <span class="sc">~</span> <span class="st">"First 4"</span>, </span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">&gt;=</span> <span class="st">"2023-03-16"</span> <span class="sc">&amp;</span> GameDate <span class="sc">&lt;=</span> <span class="st">"2023-03-17"</span> <span class="sc">~</span> <span class="st">"Round of 64"</span>,</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">&gt;=</span> <span class="st">"2023-03-18"</span> <span class="sc">&amp;</span> GameDate <span class="sc">&lt;=</span> <span class="st">"2023-03-19"</span> <span class="sc">~</span> <span class="st">"Round of 32"</span>,</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">&gt;=</span> <span class="st">"2023-03-23"</span> <span class="sc">&amp;</span> GameDate <span class="sc">&lt;=</span> <span class="st">"2023-03-24"</span> <span class="sc">~</span> <span class="st">"Sweet 16"</span>,</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">&gt;=</span> <span class="st">"2023-03-25"</span> <span class="sc">&amp;</span> GameDate <span class="sc">&lt;=</span> <span class="st">"2023-03-26"</span> <span class="sc">~</span> <span class="st">"Elite 8"</span>,</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">==</span> <span class="st">"2023-04-01"</span> <span class="sc">~</span> <span class="st">"Final 4"</span>,</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">==</span> <span class="st">"2023-04-03"</span> <span class="sc">~</span> <span class="st">"Championship"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace game start times with time categories</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Time =</span> <span class="fu">case_when</span>(</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>    Time <span class="sc">&gt;=</span> <span class="st">"12:00:00"</span> <span class="sc">&amp;</span> Time <span class="sc">&lt;</span> <span class="st">"14:14:59"</span> <span class="sc">~</span> <span class="st">"Early Afternoon"</span>,</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>    Time <span class="sc">&gt;=</span> <span class="st">"14:15:00"</span> <span class="sc">&amp;</span> Time <span class="sc">&lt;</span> <span class="st">"16:29:59"</span> <span class="sc">~</span> <span class="st">"Mid Afternoon"</span>,</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>    Time <span class="sc">&gt;=</span> <span class="st">"16:30:00"</span> <span class="sc">&amp;</span> Time <span class="sc">&lt;</span> <span class="st">"18:44:59"</span> <span class="sc">~</span> <span class="st">"Late Afternoon"</span>,</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>    Time <span class="sc">&gt;=</span> <span class="st">"18:45:00"</span> <span class="sc">&amp;</span> Time <span class="sc">&lt;</span> <span class="st">"20:59:59"</span> <span class="sc">~</span> <span class="st">"Early Evening"</span>,</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>    Time <span class="sc">&gt;=</span> <span class="st">"21:00:00"</span> <span class="sc">&amp;</span> Time <span class="sc">&lt;</span> <span class="st">"22:45:00"</span> <span class="sc">~</span> <span class="st">"Late Evening"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Import game day volume</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">GDayVolCol =</span> <span class="fu">case_when</span>(</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">==</span> <span class="st">"2023-03-14"</span> <span class="sc">~</span> <span class="dv">74</span>, </span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">==</span> <span class="st">"2023-03-15"</span> <span class="sc">~</span> <span class="dv">75</span>, </span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">==</span> <span class="st">"2023-03-16"</span> <span class="sc">~</span> <span class="dv">76</span>,</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">==</span> <span class="st">"2023-03-17"</span> <span class="sc">~</span> <span class="dv">77</span>,</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">==</span> <span class="st">"2023-03-18"</span> <span class="sc">~</span> <span class="dv">78</span>,</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">==</span> <span class="st">"2023-03-19"</span> <span class="sc">~</span> <span class="dv">79</span>,</span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">==</span> <span class="st">"2023-03-23"</span> <span class="sc">~</span> <span class="dv">83</span>,</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">==</span> <span class="st">"2023-03-24"</span> <span class="sc">~</span> <span class="dv">84</span>,</span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">==</span> <span class="st">"2023-03-25"</span> <span class="sc">~</span> <span class="dv">85</span>,</span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">==</span> <span class="st">"2023-03-26"</span> <span class="sc">~</span> <span class="dv">86</span>,</span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">==</span> <span class="st">"2023-04-01"</span> <span class="sc">~</span> <span class="dv">92</span>,</span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">==</span> <span class="st">"2023-04-03"</span> <span class="sc">~</span> <span class="dv">94</span></span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>            )) <span class="sc">%&gt;%</span></span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">School =</span> Team) <span class="sc">%&gt;%</span></span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(School, GameDate, TournamentRound, Time, GDayVolCol, IsWinner, WinningSeed, LosingSeed)</span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function to bring in Game Day Volume </span></span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>fun13 <span class="ot">&lt;-</span> <span class="cf">function</span>(row) {</span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>  school <span class="ot">&lt;-</span> row[<span class="st">"School"</span>]  <span class="co"># Get the school name from the row</span></span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>  column_index <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[<span class="st">"GDayVolCol"</span>])  <span class="co"># Convert the value to a numeric column index</span></span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a>  value <span class="ot">&lt;-</span> MMVolumeVar[MMVolumeVar<span class="sc">$</span>School <span class="sc">==</span> school, column_index]</span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">as.numeric</span>(value))</span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a><span class="co"># Return the flattened game day volume for each school</span></span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a>DateRoundTeam<span class="sc">$</span>GameDayVolume <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">apply</span>(DateRoundTeam, <span class="dv">1</span>, fun13))</span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data frame with School, GameDate, Time, TournamentRound, GameDayVolume, IsWinner, WinningSeed, LosingSeed</span></span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a>TVariables <span class="ot">&lt;-</span> DateRoundTeam <span class="sc">%&gt;%</span></span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(TournamentVariables, <span class="at">by =</span> <span class="st">"School"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(School, GameDate, Time, TournamentRound, GameDayVolume, IsWinner, WinningSeed, LosingSeed)</span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a><span class="co"># Mutate WinningSeed and LosingSeed to create IsFavorite column </span></span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a>TVariables2 <span class="ot">&lt;-</span> TVariables <span class="sc">%&gt;%</span></span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">SeedDifference =</span> <span class="fu">ifelse</span>(IsWinner <span class="sc">==</span> <span class="st">"Yes"</span>, WinningSeed <span class="sc">-</span> LosingSeed, LosingSeed <span class="sc">-</span> WinningSeed)) <span class="sc">%&gt;%</span></span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">SeedDifference =</span> <span class="fu">abs</span>(SeedDifference)) <span class="sc">%&gt;%</span></span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Upset =</span> <span class="fu">ifelse</span>(SeedDifference <span class="sc">&gt;=</span> <span class="dv">5</span>, <span class="st">"Yes"</span>, <span class="st">"No"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb3-67"><a href="#cb3-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">IsFavorite =</span> <span class="fu">ifelse</span>((IsWinner <span class="sc">==</span> <span class="st">"Yes"</span> <span class="sc">&amp;</span> WinningSeed <span class="sc">&gt;</span> LosingSeed) <span class="sc">|</span></span>
<span id="cb3-68"><a href="#cb3-68" aria-hidden="true" tabindex="-1"></a>                             (IsWinner <span class="sc">==</span> <span class="st">"No"</span> <span class="sc">&amp;</span> LosingSeed <span class="sc">&gt;</span> WinningSeed), <span class="st">"Favorite"</span>,</span>
<span id="cb3-69"><a href="#cb3-69" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">ifelse</span>(WinningSeed <span class="sc">==</span> LosingSeed, <span class="cn">NA</span>, <span class="st">"Underdog"</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb3-70"><a href="#cb3-70" aria-hidden="true" tabindex="-1"></a> <span class="fu">mutate</span>(<span class="at">FavoriteWin =</span> <span class="fu">ifelse</span>(IsFavorite <span class="sc">==</span> <span class="st">"Yes"</span> <span class="sc">&amp;</span> IsWinner <span class="sc">==</span> <span class="st">"Yes"</span>, <span class="st">"Yes"</span>, <span class="st">"No"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb3-71"><a href="#cb3-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">UnderdogWin =</span> <span class="fu">ifelse</span>(IsFavorite <span class="sc">==</span> <span class="st">"No"</span> <span class="sc">&amp;</span> IsWinner <span class="sc">==</span> <span class="st">"Yes"</span>, <span class="st">"Yes"</span>, <span class="st">"No"</span>))</span>
<span id="cb3-72"><a href="#cb3-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-73"><a href="#cb3-73" aria-hidden="true" tabindex="-1"></a>TVariables3 <span class="ot">&lt;-</span> TVariables2 <span class="sc">%&gt;%</span></span>
<span id="cb3-74"><a href="#cb3-74" aria-hidden="true" tabindex="-1"></a>   <span class="fu">select</span>(School, GameDate, Time, TournamentRound, GameDayVolume, IsFavorite, IsWinner, Upset, FavoriteWin, UnderdogWin)</span>
<span id="cb3-75"><a href="#cb3-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-76"><a href="#cb3-76" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in data for enrollment </span></span>
<span id="cb3-77"><a href="#cb3-77" aria-hidden="true" tabindex="-1"></a>SchoolNameToSchool <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"_data/SchoolNameToSchool.csv"</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>) </span>
<span id="cb3-78"><a href="#cb3-78" aria-hidden="true" tabindex="-1"></a>EnrollmentData <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"_data/CCIHE2021PublicData.csv"</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb3-79"><a href="#cb3-79" aria-hidden="true" tabindex="-1"></a>SchoolEnrollmentData <span class="ot">&lt;-</span> SchoolNameToSchool <span class="sc">%&gt;%</span></span>
<span id="cb3-80"><a href="#cb3-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(EnrollmentData, <span class="at">by =</span> <span class="st">"SchoolName"</span>)</span>
<span id="cb3-81"><a href="#cb3-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-82"><a href="#cb3-82" aria-hidden="true" tabindex="-1"></a><span class="co"># Add School Size data to TVariables3</span></span>
<span id="cb3-83"><a href="#cb3-83" aria-hidden="true" tabindex="-1"></a>TVariables4 <span class="ot">&lt;-</span> TVariables3 <span class="sc">%&gt;%</span></span>
<span id="cb3-84"><a href="#cb3-84" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(SchoolEnrollmentData, <span class="at">by =</span> <span class="st">"School"</span>)</span>
<span id="cb3-85"><a href="#cb3-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-86"><a href="#cb3-86" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in Is Major Variable</span></span>
<span id="cb3-87"><a href="#cb3-87" aria-hidden="true" tabindex="-1"></a>DateRoundTeamSeedMajor <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"_data/DateRoundTeamSeedMajor.csv"</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-88"><a href="#cb3-88" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(School, Major)</span>
<span id="cb3-89"><a href="#cb3-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-90"><a href="#cb3-90" aria-hidden="true" tabindex="-1"></a><span class="co"># Add Is Major to TVariables4</span></span>
<span id="cb3-91"><a href="#cb3-91" aria-hidden="true" tabindex="-1"></a>TVariables4 <span class="ot">&lt;-</span> TVariables4 <span class="sc">%&gt;%</span></span>
<span id="cb3-92"><a href="#cb3-92" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(DateRoundTeamSeedMajor, <span class="at">by =</span> <span class="st">"School"</span>, <span class="at">relationship =</span></span>
<span id="cb3-93"><a href="#cb3-93" aria-hidden="true" tabindex="-1"></a>  <span class="st">"many-to-many"</span>) </span>
<span id="cb3-94"><a href="#cb3-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-95"><a href="#cb3-95" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data frame with all variables </span></span>
<span id="cb3-96"><a href="#cb3-96" aria-hidden="true" tabindex="-1"></a>VolumeFull <span class="ot">&lt;-</span> TVariables4 <span class="sc">%&gt;%</span></span>
<span id="cb3-97"><a href="#cb3-97" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(MMVolAvgs, <span class="at">by =</span> <span class="st">"School"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-98"><a href="#cb3-98" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>SchoolName)</span>
<span id="cb3-99"><a href="#cb3-99" aria-hidden="true" tabindex="-1"></a>VolumeFull</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 374 × 22
   School     GameDate   Time  TournamentRound GameDayVolume IsFavorite IsWinner
   &lt;chr&gt;      &lt;date&gt;     &lt;chr&gt; &lt;chr&gt;                   &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;   
 1 Pittsburg… 2023-03-14 Late… First 4                  4671 &lt;NA&gt;       Yes     
 2 Pittsburg… 2023-03-14 Late… First 4                  4671 &lt;NA&gt;       Yes     
 3 Pittsburg… 2023-03-14 Late… First 4                  4671 &lt;NA&gt;       Yes     
 4 Texas A&amp;M… 2023-03-14 Late… First 4                   510 &lt;NA&gt;       Yes     
 5 Texas A&amp;M… 2023-03-14 Late… First 4                   510 &lt;NA&gt;       Yes     
 6 Arizona S… 2023-03-15 Late… First 4                  3902 &lt;NA&gt;       Yes     
 7 Arizona S… 2023-03-15 Late… First 4                  3902 &lt;NA&gt;       Yes     
 8 Fairleigh… 2023-03-15 Late… First 4                  1641 &lt;NA&gt;       Yes     
 9 Fairleigh… 2023-03-15 Late… First 4                  1641 &lt;NA&gt;       Yes     
10 Fairleigh… 2023-03-15 Late… First 4                  1641 &lt;NA&gt;       Yes     
# ℹ 364 more rows
# ℹ 15 more variables: Upset &lt;chr&gt;, FavoriteWin &lt;chr&gt;, UnderdogWin &lt;chr&gt;,
#   SizeSetting &lt;chr&gt;, Control &lt;chr&gt;, F20Enrollment &lt;dbl&gt;, Major &lt;chr&gt;,
#   VolDuring &lt;dbl&gt;, VolNonTourn &lt;dbl&gt;, VolBefore &lt;dbl&gt;, VolAfter &lt;dbl&gt;,
#   VolPostElim &lt;dbl&gt;, VolPostElim1 &lt;dbl&gt;, VolPostElim2 &lt;dbl&gt;,
#   VolPostElim3 &lt;dbl&gt;</code></pre>
</div>
</div>
<p>I now have a data frame with all of my variables of interest.</p>
</section>
<section id="create-variables-for-diffences-in-average-volumevolume" class="level4">
<h4 class="anchored" data-anchor-id="create-variables-for-diffences-in-average-volumevolume">Create variables for diffences in average volume/volume</h4>
<p>Solely comparing differences in volume between the schools is not helpful because their baselines are very different; a 1,000 mention increase for a school that typically receives 10 mentions per day is very different than a school that typically receives 1,000.</p>
<p>Accordingly, I will transform volume metrics into percentage differences so that I can better compare the impact of March Madness across the different schools.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate difference between average volume during tournament and non-tournament</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>MMVolDiffs <span class="ot">&lt;-</span> MMVolAvgs <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">InTournamentDifference =</span> <span class="fu">round</span>(((VolDuring <span class="sc">/</span> VolNonTourn) <span class="sc">*</span> <span class="dv">100</span>), <span class="at">digits =</span> <span class="dv">2</span>),</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">DayPostElimDifference =</span> <span class="fu">round</span>(((VolPostElim <span class="sc">/</span> VolNonTourn) <span class="sc">*</span> <span class="dv">100</span>), <span class="at">digits =</span> <span class="dv">2</span>),</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">ElimPlus1Difference =</span> <span class="fu">round</span>(((VolPostElim1 <span class="sc">/</span> VolNonTourn) <span class="sc">*</span> <span class="dv">100</span>), <span class="at">digits =</span> <span class="dv">2</span>),</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">ElimPlus2Difference =</span> <span class="fu">round</span>(((VolPostElim2 <span class="sc">/</span> VolNonTourn) <span class="sc">*</span> <span class="dv">100</span>), <span class="at">digits =</span> <span class="dv">2</span>), </span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">ElimPlus3Difference =</span> <span class="fu">round</span>(((VolPostElim3 <span class="sc">/</span> VolNonTourn) <span class="sc">*</span> <span class="dv">100</span>), <span class="at">digits =</span> <span class="dv">2</span>),</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(School, InTournamentDifference, DayPostElimDifference, ElimPlus1Difference, ElimPlus2Difference, ElimPlus3Difference)</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>MMVolDiffs</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 68 × 6
   School       InTournamentDifference DayPostElimDifference ElimPlus1Difference
   &lt;chr&gt;                         &lt;dbl&gt;                 &lt;dbl&gt;               &lt;dbl&gt;
 1 University …                   303.                  92.3                80.3
 2 University …                   212.                 105.                 60.3
 3 Arizona Sta…                   185.                  73.1                82.4
 4 Duke Univer…                   206.                  62.5                72.3
 5 Utah State …                   243.                  49.8                44.4
 6 University …                   252.                  86.9                60.1
 7 North Carol…                   112.                  38.2                79.8
 8 University …                   394.                 184.                143. 
 9 Providence …                   194.                  74.9               628. 
10 Xavier Univ…                   346.                  60.4                63.8
# ℹ 58 more rows
# ℹ 2 more variables: ElimPlus2Difference &lt;dbl&gt;, ElimPlus3Difference &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
</div>
</div>
</div>


<!-- -->



<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p><a href="https://www.hbs.edu/faculty/Pages/item.aspx?num=44778" class="uri">https://www.hbs.edu/faculty/Pages/item.aspx?num=44778</a><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p><a href="https://hbswk.hbs.edu/item/diagnosing-the-flutie-effect-on-college-marketing" class="uri">https://hbswk.hbs.edu/item/diagnosing-the-flutie-effect-on-college-marketing</a><a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p><a href="https://www.forbes.com/sites/hbsworkingknowledge/2013/04/29/the-flutie-effect-how-athletic-success-boosts-college-applications/?sh=61f984206e96" class="uri">https://www.forbes.com/sites/hbsworkingknowledge/2013/04/29/the-flutie-effect-how-athletic-success-boosts-college-applications/?sh=61f984206e96</a><a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p><a href="https://www.campussonar.com/campus-sonar-expertise" class="uri">https://www.campussonar.com/campus-sonar-expertise</a><a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>Publication of this data is forthcoming; it will be discussed during this webinar <a href="https://t.co/MK2fARTWb5" class="uri">https://t.co/MK2fARTWb5</a><a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p><a href="https://wallethub.com/blog/march-madness-statistics/11016" class="uri">https://wallethub.com/blog/march-madness-statistics/11016</a><a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p><a href="https://blog.campussonar.com/blog/leverage-the-everyday-impact-of-athletics" class="uri">https://blog.campussonar.com/blog/leverage-the-everyday-impact-of-athletics</a><a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="DACSS/603_Spring_2023" data-repo-id="R_kgDOI4oXIA" data-category="Announcements" data-category-id="" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb7" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Check In 2"</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Darron Bunt"</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="an">description:</span><span class="co"> "Final Project Check In 2 - Darron Bunt"</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "05/13/2023"</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: true</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co">    code-copy: true</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="an">categories:</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="co">  - finalproject</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a><span class="fu">### Research Question</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>In April 2013, Doug J. Chung published a research paper<span class="ot">[^1]</span> endeavoring to quantify and model the impact of the so-called "Flutie Effect" - the spillover impact that athletics has on the quantity and quality of applicants to US colleges (named after Boston College quarterback Doug Flutie, who in 1984 threw a Hail Mary touchdown pass to secure victory with six seconds in a game against the University of Miami, qualifying the team to compete in the Cotton Bowl<span class="ot">[^2]</span>). The legacy of Flutie's on-field success has been credited with catalyzing a 30% increase in undergraduate applications at Boston College, though institutional officials have argued that other, non-athletic factors were the "true" reason behind the increase. This trend of increased applications after prominent athletic successes, however, has been observed at other institutions including Georgetown, Northwestern, Boise State, and Texas Christian University.</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a><span class="ot">[^1]: &lt;https://www.hbs.edu/faculty/Pages/item.aspx?num=44778&gt;</span></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a><span class="ot">[^2]: &lt;https://hbswk.hbs.edu/item/diagnosing-the-flutie-effect-on-college-marketing&gt;</span></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>Chung was able to find a statistically significant relationship between athletic success and both the quantity (number of applications) and quality (SAT scores of those applicants) of applicants to a given institution; his findings included that when a school rises from being classified as a mediocre football program to great one, applications rise by 18.7%<span class="ot">[^3]</span>. </span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a><span class="ot">[^3]: &lt;https://www.forbes.com/sites/hbsworkingknowledge/2013/04/29/the-flutie-effect-how-athletic-success-boosts-college-applications/?sh=61f984206e96&gt;</span></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>While in my job I do not focus directly on applications to US colleges, I do work with on campus marketing and communications leaders, and generate insights from data derived from online conversation about their schools so that they can better understand that conversation in ways that can help them to develop, refine, and align their communications strategies with the goals of the institutions that they serve<span class="ot">[^4]</span>. A trend I frequently observe while analyzing this online conversation data is the impact that athletics has on the volume and reach of mentions related to schools. </span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a><span class="ot">[^4]: &lt;https://www.campussonar.com/campus-sonar-expertise&gt;</span></span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>In benchmarking work that we've undertaken in order to better understand online conversation trends in higher education, we've found that, on average, 63% of all online conversation related to schools is about their athletics - and for some schools, this proportion can be as high as 91%<span class="ot">[^5]</span>. And while the proportion of overall online conversation relating to different colleges is already quite high, there are certain significant events within the realm of college sports that send mention volume even higher. One such event is March Madness.</span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a><span class="ot">[^5]: </span>Publication of this data is forthcoming; it will be discussed during this webinar <span class="ot">&lt;https://t.co/MK2fARTWb5&gt;</span></span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>Run by the NCAA every year during the month of March, the men's version of the March Madness tournament is widely regarded as one of biggest American sporting events. 68 teams participate in the three-week long single-elimination tournament, which produced $1.14 billion in annual revenue for the NCAA in 2022<span class="ot">[^6]</span>. One of the most exciting parts of the tournament are the "Cinderella stories"; teams with a low ranking that manage to eliminate higher ranked teams. </span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a><span class="ot">[^6]: &lt;https://wallethub.com/blog/march-madness-statistics/11016&gt;</span></span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a>In 2022, I became interested in developing a greater understanding of the impact that March Madness could have on a school's online conversation volume and began tracking that year's Cinderella - the Saint Peter's College Peacocks, a #15 seed that made it all the way to the Elite 8. In their Sweet 16 game against Purdue, Saint Peter's had more mentions *per minute* than their average monthly volume for the prior five months. Their total mention volume during the month of March was *12,380 times* more than that same monthly average<span class="ot">[^7]</span>.</span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a><span class="ot">[^7]: &lt;https://blog.campussonar.com/blog/leverage-the-everyday-impact-of-athletics&gt;</span></span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a>After completing that work, I became increasingly curious about how participation in the tournament affected conversation volume and reach for all teams, not just Cinderella stories. I wanted to investigate the factors that might influence more/less conversation volume for any given team, and indeed, whether conversation about the team was the only facet of conversation about a college that increased - or if the school as a whole received more conversation overall. I became very interested in learning more about the overall trends that relate to participation in events like March Madness and how we could use that information to provide strategic insights to colleges across the US.</span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>Bringing it back to the Flutie Effect - if on-field athletic success can impact enrollment at US colleges, it stands to reason that online conversation about athletic success (or athletic events in general) could have a similar impact. Accordingly, it would be prudent to further explore the impact an event like the men's March Madness tournament has on online conversation volume for US colleges.  </span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a>Specifically, the research question that I want to explore is:</span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a>**What impact does participation in the men's March Madness tournament have on online conversation about the schools involved?** </span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a>And more specifically, some nuances to this question that I want to consider are:</span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-61"><a href="#cb7-61" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>How does mention volume differ when schools are participating in the tournament?</span>
<span id="cb7-62"><a href="#cb7-62" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span>Is there a difference in reach for schools participating in the tournament?</span>
<span id="cb7-63"><a href="#cb7-63" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span>Is there a correlation between increase in mention volume and increase in reach?</span>
<span id="cb7-64"><a href="#cb7-64" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>What is the baseline of conversation volume/reach increase that can be expected when a team participates in the tournament?</span>
<span id="cb7-65"><a href="#cb7-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-66"><a href="#cb7-66" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>What variables contribute to increased/decreased mention volume/reach during the tournament?</span>
<span id="cb7-67"><a href="#cb7-67" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span>Size of school</span>
<span id="cb7-68"><a href="#cb7-68" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span>Major / mid-major</span>
<span id="cb7-69"><a href="#cb7-69" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span>Round of the tournament </span>
<span id="cb7-70"><a href="#cb7-70" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span>Favorite / underdog</span>
<span id="cb7-71"><a href="#cb7-71" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span>Win/Loss</span>
<span id="cb7-72"><a href="#cb7-72" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span>Upset</span>
<span id="cb7-73"><a href="#cb7-73" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span>Time of day</span>
<span id="cb7-74"><a href="#cb7-74" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>If there is a change in mention volume/reach during the tournament, how long does this change last?</span>
<span id="cb7-75"><a href="#cb7-75" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span>Is this length of time similar or different for volume and reach?</span>
<span id="cb7-76"><a href="#cb7-76" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span>Do the same variables that contribute to increased/decreased mention volume also impact the length of that increase?</span>
<span id="cb7-77"><a href="#cb7-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-78"><a href="#cb7-78" aria-hidden="true" tabindex="-1"></a>Answers to these questions will provide a better understanding of the overall impact that events such as the men's March Madness tournament have on conversation volume/reach and can subsequently serve to inform strategies and tactics that can be implemented by marketing and communications professionals who focus on digital media in higher education. That is, schools can use this information to develop further hypotheses to be tested that would facilitate a goal of leveraging and maximizing the impact of athletic participation and success on their online conversation. </span>
<span id="cb7-79"><a href="#cb7-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-80"><a href="#cb7-80" aria-hidden="true" tabindex="-1"></a><span class="fu">### Hypothesis</span></span>
<span id="cb7-81"><a href="#cb7-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-82"><a href="#cb7-82" aria-hidden="true" tabindex="-1"></a>My overarching hypothesis is that **participation in the men's March Madness tournament increases online conversation about the schools that are involved.** I further hypothesize that:</span>
<span id="cb7-83"><a href="#cb7-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-84"><a href="#cb7-84" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>There is a correlation between increases in mention volume and overall/average reach; that is, it's not just the number of mentions about each school that increases, but also the number of people who see those mentions. </span>
<span id="cb7-85"><a href="#cb7-85" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>The increase in conversation (volume and reach) for each school will be influenced by seven factors: school size, classification as a major or mid-major school, which round of the tournament the game happens during, whether the team was the favorite (ranked higher) or the underdog (ranked lower), whether the team won or lost, whether the game was considered a major upset, and the time of day the game took place. </span>
<span id="cb7-86"><a href="#cb7-86" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>The change in mention volume/reach will return to baseline within a matter of days after a team's exit from the tournament. </span>
<span id="cb7-87"><a href="#cb7-87" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>The variables I hypothesize contribute to variations in how volume/reach increase will **not** also impact the length of that increase.</span>
<span id="cb7-88"><a href="#cb7-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-89"><a href="#cb7-89" aria-hidden="true" tabindex="-1"></a>**What impact does participation in the men's March Madness tournament have on online conversation about the schools involved?** </span>
<span id="cb7-90"><a href="#cb7-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-91"><a href="#cb7-91" aria-hidden="true" tabindex="-1"></a><span class="fu">### Data Collection</span></span>
<span id="cb7-92"><a href="#cb7-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-93"><a href="#cb7-93" aria-hidden="true" tabindex="-1"></a>The data used for this project was collected by me using the Brandwatch Consumer Research platform. I first wrote Boolean to search for mentions about all 68 schools with teams in the men's March Madness tournament, using the same parameters to construct each one (specifically, the school's full name, shortened name(s), acronym(s), mascot(s), website URL, athletics website URL, and Twitter usernames for the school's flagship, flagship athletics, and men's basketball team accounts). The Boolean was then used to run a query within Brandwatch to pull all relevant, retrievable online mentions for the 68 schools made between January 1 and April 30 2023. This search returned 8,099,045 mentions. </span>
<span id="cb7-94"><a href="#cb7-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-95"><a href="#cb7-95" aria-hidden="true" tabindex="-1"></a>One of the features included in Brandwatch is the ability to segment data into categories, and this can be done in a wide range of manners (using Boolean or a variety of pre-built parameters such as content sources and mention types). I used this feature to create a variety of categories that would be necessary for me to be able to parse the full dataset into manageable chunks that could be used to answer my research question. </span>
<span id="cb7-96"><a href="#cb7-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-97"><a href="#cb7-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-98"><a href="#cb7-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-99"><a href="#cb7-99" aria-hidden="true" tabindex="-1"></a><span class="fu">### Variables of Interest </span></span>
<span id="cb7-100"><a href="#cb7-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-101"><a href="#cb7-101" aria-hidden="true" tabindex="-1"></a>First I need to do some data manipulation in order to create my variables of interest.</span>
<span id="cb7-102"><a href="#cb7-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-103"><a href="#cb7-103" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Data Manipulation For Mention Volume </span></span>
<span id="cb7-104"><a href="#cb7-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-105"><a href="#cb7-105" aria-hidden="true" tabindex="-1"></a>I need to calculate the average daily volume for the following time spans:</span>
<span id="cb7-106"><a href="#cb7-106" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Outside of Tournament Play (January 1 to March 13; two days after elimination to May 12)</span>
<span id="cb7-107"><a href="#cb7-107" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>During the Tournament (March 14 to day after elimination)</span>
<span id="cb7-108"><a href="#cb7-108" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Before the Tournament (January 1 to March 13)</span>
<span id="cb7-109"><a href="#cb7-109" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>After the Tournament (Two days after elimination to May 12)</span>
<span id="cb7-110"><a href="#cb7-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-111"><a href="#cb7-111" aria-hidden="true" tabindex="-1"></a>And then I need to add columns with the daily volume for the following times:</span>
<span id="cb7-112"><a href="#cb7-112" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Post Elimination (two days after)</span>
<span id="cb7-113"><a href="#cb7-113" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Post Plus 1 (three days after)</span>
<span id="cb7-114"><a href="#cb7-114" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Post Plus 2 (four days after)</span>
<span id="cb7-115"><a href="#cb7-115" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Post Plus 3 (five days after)</span>
<span id="cb7-116"><a href="#cb7-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-119"><a href="#cb7-119" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb7-120"><a href="#cb7-120" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in data</span></span>
<span id="cb7-121"><a href="#cb7-121" aria-hidden="true" tabindex="-1"></a>TournamentVariables <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"_data/MMVariables.csv"</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb7-122"><a href="#cb7-122" aria-hidden="true" tabindex="-1"></a>MMVolume <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"_data/MentionsPerDayALL.csv"</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb7-123"><a href="#cb7-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-124"><a href="#cb7-124" aria-hidden="true" tabindex="-1"></a><span class="co"># Join data</span></span>
<span id="cb7-125"><a href="#cb7-125" aria-hidden="true" tabindex="-1"></a>MMVolumeVar <span class="ot">&lt;-</span> MMVolume <span class="sc">%&gt;%</span></span>
<span id="cb7-126"><a href="#cb7-126" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(TournamentVariables, <span class="at">by =</span> <span class="st">"School"</span>)</span>
<span id="cb7-127"><a href="#cb7-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-128"><a href="#cb7-128" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate pre-tournament average daily volume </span></span>
<span id="cb7-129"><a href="#cb7-129" aria-hidden="true" tabindex="-1"></a>MMVolumeVar<span class="sc">$</span>VolBefore <span class="ot">&lt;-</span> (<span class="fu">round</span>(<span class="fu">rowMeans</span>(MMVolumeVar[, <span class="dv">2</span><span class="sc">:</span><span class="dv">73</span>]), <span class="at">digits =</span> <span class="dv">0</span>))</span>
<span id="cb7-130"><a href="#cb7-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-131"><a href="#cb7-131" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function to pull the rows needed to calculate "during tournament" for each of the schools</span></span>
<span id="cb7-132"><a href="#cb7-132" aria-hidden="true" tabindex="-1"></a>fun1 <span class="ot">&lt;-</span> <span class="cf">function</span>(row) {</span>
<span id="cb7-133"><a href="#cb7-133" aria-hidden="true" tabindex="-1"></a>  start_col1 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[<span class="dv">134</span>])  <span class="co"># Convert the value to a numeric column index</span></span>
<span id="cb7-134"><a href="#cb7-134" aria-hidden="true" tabindex="-1"></a>  end_col1 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[<span class="dv">135</span>])    <span class="co"># Convert the value to a numeric column index</span></span>
<span id="cb7-135"><a href="#cb7-135" aria-hidden="true" tabindex="-1"></a>  values1 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[start_col1<span class="sc">:</span>end_col1]) <span class="co"># The rows to calculate the average</span></span>
<span id="cb7-136"><a href="#cb7-136" aria-hidden="true" tabindex="-1"></a>  average1 <span class="ot">&lt;-</span> (<span class="fu">round</span>(<span class="fu">mean</span>(values1, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">digits =</span> <span class="dv">0</span>))</span>
<span id="cb7-137"><a href="#cb7-137" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(average1)</span>
<span id="cb7-138"><a href="#cb7-138" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-139"><a href="#cb7-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-140"><a href="#cb7-140" aria-hidden="true" tabindex="-1"></a><span class="co"># Return the average daily volume for "during tournament" for each school </span></span>
<span id="cb7-141"><a href="#cb7-141" aria-hidden="true" tabindex="-1"></a>MMVolumeVar<span class="sc">$</span>VolDuring <span class="ot">&lt;-</span> <span class="fu">apply</span>(MMVolumeVar, <span class="dv">1</span>, fun1)</span>
<span id="cb7-142"><a href="#cb7-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-143"><a href="#cb7-143" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function to pull the rows needed to calculate "after tournament" for each of the schools</span></span>
<span id="cb7-144"><a href="#cb7-144" aria-hidden="true" tabindex="-1"></a>fun2 <span class="ot">&lt;-</span> <span class="cf">function</span>(row) {</span>
<span id="cb7-145"><a href="#cb7-145" aria-hidden="true" tabindex="-1"></a>  start_col2 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[<span class="dv">136</span>])  <span class="co"># Convert the value to a numeric column index</span></span>
<span id="cb7-146"><a href="#cb7-146" aria-hidden="true" tabindex="-1"></a>  end_col2 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[<span class="dv">137</span>])    <span class="co"># Convert the value to a numeric column index</span></span>
<span id="cb7-147"><a href="#cb7-147" aria-hidden="true" tabindex="-1"></a>  values2 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[start_col2<span class="sc">:</span>end_col2]) <span class="co"># The rows to calculate the average</span></span>
<span id="cb7-148"><a href="#cb7-148" aria-hidden="true" tabindex="-1"></a>  average2 <span class="ot">&lt;-</span> (<span class="fu">round</span>(<span class="fu">mean</span>(values2, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">digits =</span> <span class="dv">0</span>))</span>
<span id="cb7-149"><a href="#cb7-149" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(average2)</span>
<span id="cb7-150"><a href="#cb7-150" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-151"><a href="#cb7-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-152"><a href="#cb7-152" aria-hidden="true" tabindex="-1"></a><span class="co"># Return the average daily volume for "during tournament" for each school </span></span>
<span id="cb7-153"><a href="#cb7-153" aria-hidden="true" tabindex="-1"></a>MMVolumeVar<span class="sc">$</span>VolAfter <span class="ot">&lt;-</span> <span class="fu">apply</span>(MMVolumeVar, <span class="dv">1</span>, fun2)</span>
<span id="cb7-154"><a href="#cb7-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-155"><a href="#cb7-155" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function to pull the rows needed for post-elimination volume </span></span>
<span id="cb7-156"><a href="#cb7-156" aria-hidden="true" tabindex="-1"></a>fun3 <span class="ot">&lt;-</span> <span class="cf">function</span>(row) {</span>
<span id="cb7-157"><a href="#cb7-157" aria-hidden="true" tabindex="-1"></a>  column_index3 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[<span class="dv">136</span>])  <span class="co"># Convert the value to a numeric column index</span></span>
<span id="cb7-158"><a href="#cb7-158" aria-hidden="true" tabindex="-1"></a>  value3 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[column_index3])  <span class="co"># Get the value from the specified column</span></span>
<span id="cb7-159"><a href="#cb7-159" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(value3)</span>
<span id="cb7-160"><a href="#cb7-160" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-161"><a href="#cb7-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-162"><a href="#cb7-162" aria-hidden="true" tabindex="-1"></a><span class="co"># Return the post-elimination day volume for each school </span></span>
<span id="cb7-163"><a href="#cb7-163" aria-hidden="true" tabindex="-1"></a>MMVolumeVar<span class="sc">$</span>VolPostElim <span class="ot">&lt;-</span> <span class="fu">apply</span>(MMVolumeVar, <span class="dv">1</span>, fun3)</span>
<span id="cb7-164"><a href="#cb7-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-165"><a href="#cb7-165" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function to pull the rows needed for non-tournament volume</span></span>
<span id="cb7-166"><a href="#cb7-166" aria-hidden="true" tabindex="-1"></a>fun14 <span class="ot">&lt;-</span> <span class="cf">function</span>(row) {</span>
<span id="cb7-167"><a href="#cb7-167" aria-hidden="true" tabindex="-1"></a>  start_col14 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[<span class="dv">142</span>])    <span class="co"># Start column index for range 1</span></span>
<span id="cb7-168"><a href="#cb7-168" aria-hidden="true" tabindex="-1"></a>  end_col14 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[<span class="dv">143</span>])      <span class="co"># End column index for range 1</span></span>
<span id="cb7-169"><a href="#cb7-169" aria-hidden="true" tabindex="-1"></a>  start_col14a <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[<span class="dv">140</span>])    <span class="co"># Start column index for range 2</span></span>
<span id="cb7-170"><a href="#cb7-170" aria-hidden="true" tabindex="-1"></a>  end_col14a <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[<span class="dv">141</span>])      <span class="co"># End column index for range 2</span></span>
<span id="cb7-171"><a href="#cb7-171" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-172"><a href="#cb7-172" aria-hidden="true" tabindex="-1"></a>  values14 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[start_col14<span class="sc">:</span>end_col14])    <span class="co"># Values for range 1</span></span>
<span id="cb7-173"><a href="#cb7-173" aria-hidden="true" tabindex="-1"></a>  values14a <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[start_col14a<span class="sc">:</span>end_col14a])    <span class="co"># Values for range 2</span></span>
<span id="cb7-174"><a href="#cb7-174" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-175"><a href="#cb7-175" aria-hidden="true" tabindex="-1"></a>  values14b <span class="ot">&lt;-</span> <span class="fu">c</span>(values14, values14a)    <span class="co"># Combine the values from both ranges</span></span>
<span id="cb7-176"><a href="#cb7-176" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-177"><a href="#cb7-177" aria-hidden="true" tabindex="-1"></a>  average14 <span class="ot">&lt;-</span> (<span class="fu">round</span>(<span class="fu">mean</span>(values14b, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">digits =</span> <span class="dv">0</span>))</span>
<span id="cb7-178"><a href="#cb7-178" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(average14)</span>
<span id="cb7-179"><a href="#cb7-179" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-180"><a href="#cb7-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-181"><a href="#cb7-181" aria-hidden="true" tabindex="-1"></a><span class="co"># Return the average non-tournament daily volume for each school </span></span>
<span id="cb7-182"><a href="#cb7-182" aria-hidden="true" tabindex="-1"></a>MMVolumeVar<span class="sc">$</span>VolNonTourn <span class="ot">&lt;-</span> <span class="fu">apply</span>(MMVolumeVar, <span class="dv">1</span>, fun14) </span>
<span id="cb7-183"><a href="#cb7-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-184"><a href="#cb7-184" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function to pull the rows needed for post-elimination +1 volume </span></span>
<span id="cb7-185"><a href="#cb7-185" aria-hidden="true" tabindex="-1"></a>fun4 <span class="ot">&lt;-</span> <span class="cf">function</span>(row) {</span>
<span id="cb7-186"><a href="#cb7-186" aria-hidden="true" tabindex="-1"></a>  column_index4 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[<span class="dv">137</span>])  <span class="co"># Convert the value to a numeric column index</span></span>
<span id="cb7-187"><a href="#cb7-187" aria-hidden="true" tabindex="-1"></a>  value4 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[column_index4])  <span class="co"># Get the value from the specified column</span></span>
<span id="cb7-188"><a href="#cb7-188" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(value4)</span>
<span id="cb7-189"><a href="#cb7-189" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-190"><a href="#cb7-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-191"><a href="#cb7-191" aria-hidden="true" tabindex="-1"></a><span class="co"># Return the post-elimination +1 volume for each school </span></span>
<span id="cb7-192"><a href="#cb7-192" aria-hidden="true" tabindex="-1"></a>MMVolumeVar<span class="sc">$</span>VolPostElim1 <span class="ot">&lt;-</span> <span class="fu">apply</span>(MMVolumeVar, <span class="dv">1</span>, fun4)</span>
<span id="cb7-193"><a href="#cb7-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-194"><a href="#cb7-194" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function to pull the rows needed for post-elimination +2 volume </span></span>
<span id="cb7-195"><a href="#cb7-195" aria-hidden="true" tabindex="-1"></a>fun5 <span class="ot">&lt;-</span> <span class="cf">function</span>(row) {</span>
<span id="cb7-196"><a href="#cb7-196" aria-hidden="true" tabindex="-1"></a>  column_index5 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[<span class="dv">138</span>])  <span class="co"># Convert the value to a numeric column index</span></span>
<span id="cb7-197"><a href="#cb7-197" aria-hidden="true" tabindex="-1"></a>  value5 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[column_index5])  <span class="co"># Get the value from the specified column</span></span>
<span id="cb7-198"><a href="#cb7-198" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(value5)</span>
<span id="cb7-199"><a href="#cb7-199" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-200"><a href="#cb7-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-201"><a href="#cb7-201" aria-hidden="true" tabindex="-1"></a><span class="co"># Return the post-elimination +2 volume for each school </span></span>
<span id="cb7-202"><a href="#cb7-202" aria-hidden="true" tabindex="-1"></a>MMVolumeVar<span class="sc">$</span>VolPostElim2 <span class="ot">&lt;-</span> <span class="fu">apply</span>(MMVolumeVar, <span class="dv">1</span>, fun5)</span>
<span id="cb7-203"><a href="#cb7-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-204"><a href="#cb7-204" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function to pull the rows needed for post-elimination +3 volume </span></span>
<span id="cb7-205"><a href="#cb7-205" aria-hidden="true" tabindex="-1"></a>fun6 <span class="ot">&lt;-</span> <span class="cf">function</span>(row) {</span>
<span id="cb7-206"><a href="#cb7-206" aria-hidden="true" tabindex="-1"></a>  column_index6 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[<span class="dv">139</span>])  <span class="co"># Convert the value to a numeric column index</span></span>
<span id="cb7-207"><a href="#cb7-207" aria-hidden="true" tabindex="-1"></a>  value6 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[column_index6])  <span class="co"># Get the value from the specified column</span></span>
<span id="cb7-208"><a href="#cb7-208" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(value6)</span>
<span id="cb7-209"><a href="#cb7-209" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-210"><a href="#cb7-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-211"><a href="#cb7-211" aria-hidden="true" tabindex="-1"></a><span class="co"># Return the post-elimination +3 volume for each school </span></span>
<span id="cb7-212"><a href="#cb7-212" aria-hidden="true" tabindex="-1"></a>MMVolumeVar<span class="sc">$</span>VolPostElim3 <span class="ot">&lt;-</span> <span class="fu">apply</span>(MMVolumeVar, <span class="dv">1</span>, fun6)</span>
<span id="cb7-213"><a href="#cb7-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-214"><a href="#cb7-214" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a data frame with the columns for the calculated means</span></span>
<span id="cb7-215"><a href="#cb7-215" aria-hidden="true" tabindex="-1"></a>MMVolAvgs <span class="ot">&lt;-</span> MMVolumeVar <span class="sc">%&gt;%</span></span>
<span id="cb7-216"><a href="#cb7-216" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(School, VolDuring, VolNonTourn, VolBefore, VolAfter, VolPostElim,  VolPostElim1, VolPostElim2, VolPostElim3)</span>
<span id="cb7-217"><a href="#cb7-217" aria-hidden="true" tabindex="-1"></a>MMVolAvgs</span>
<span id="cb7-218"><a href="#cb7-218" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb7-219"><a href="#cb7-219" aria-hidden="true" tabindex="-1"></a>This data frame shows:</span>
<span id="cb7-220"><a href="#cb7-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-221"><a href="#cb7-221" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Average daily volume </span>
<span id="cb7-222"><a href="#cb7-222" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span>during the tournament</span>
<span id="cb7-223"><a href="#cb7-223" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span>outside of the tournament</span>
<span id="cb7-224"><a href="#cb7-224" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span>before the tournament</span>
<span id="cb7-225"><a href="#cb7-225" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span>after the tournament </span>
<span id="cb7-226"><a href="#cb7-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-227"><a href="#cb7-227" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Daily volume</span>
<span id="cb7-228"><a href="#cb7-228" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span>two days after elimination</span>
<span id="cb7-229"><a href="#cb7-229" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span>three days after elimination</span>
<span id="cb7-230"><a href="#cb7-230" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span>four days after elimination</span>
<span id="cb7-231"><a href="#cb7-231" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span>five days after elimination</span>
<span id="cb7-232"><a href="#cb7-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-233"><a href="#cb7-233" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Data Manipulation for Independent Variables and Game Day Volume</span></span>
<span id="cb7-234"><a href="#cb7-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-235"><a href="#cb7-235" aria-hidden="true" tabindex="-1"></a>Independent variables include:</span>
<span id="cb7-236"><a href="#cb7-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-237"><a href="#cb7-237" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Game Date</span>
<span id="cb7-238"><a href="#cb7-238" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Round </span>
<span id="cb7-239"><a href="#cb7-239" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Seed </span>
<span id="cb7-240"><a href="#cb7-240" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Is Major</span>
<span id="cb7-241"><a href="#cb7-241" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Is Favorite </span>
<span id="cb7-242"><a href="#cb7-242" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Is Winner</span>
<span id="cb7-243"><a href="#cb7-243" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Is Upset </span>
<span id="cb7-244"><a href="#cb7-244" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Favorite Winner</span>
<span id="cb7-245"><a href="#cb7-245" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Underdog Winner</span>
<span id="cb7-246"><a href="#cb7-246" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Time of Day</span>
<span id="cb7-247"><a href="#cb7-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-248"><a href="#cb7-248" aria-hidden="true" tabindex="-1"></a>And I will be also adding game day volume during this step. </span>
<span id="cb7-249"><a href="#cb7-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-252"><a href="#cb7-252" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb7-253"><a href="#cb7-253" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in game scores, dates, etc.</span></span>
<span id="cb7-254"><a href="#cb7-254" aria-hidden="true" tabindex="-1"></a>DateAndTeam <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"_data/MBBMMGameData.csv"</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb7-255"><a href="#cb7-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-256"><a href="#cb7-256" aria-hidden="true" tabindex="-1"></a>DateAndTeam<span class="sc">$</span>GameDate <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(DateAndTeam<span class="sc">$</span>Date, <span class="at">format =</span> <span class="st">"%m/%d/%Y"</span>)</span>
<span id="cb7-257"><a href="#cb7-257" aria-hidden="true" tabindex="-1"></a>DateAndTeam<span class="sc">$</span>Time <span class="ot">&lt;-</span> DateAndTeam<span class="sc">$</span>Time <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" ET"</span>, <span class="st">""</span>, DateAndTeam<span class="sc">$</span>Time)</span>
<span id="cb7-258"><a href="#cb7-258" aria-hidden="true" tabindex="-1"></a>DateAndTeam<span class="sc">$</span>Time <span class="ot">&lt;-</span> <span class="fu">strptime</span>(DateAndTeam<span class="sc">$</span>Time, <span class="at">format=</span><span class="st">"%I:%M%p"</span>)</span>
<span id="cb7-259"><a href="#cb7-259" aria-hidden="true" tabindex="-1"></a>DateAndTeam<span class="sc">$</span>Time <span class="ot">&lt;-</span> <span class="fu">format</span>(DateAndTeam<span class="sc">$</span>Time, <span class="at">format =</span> <span class="st">"%H:%M:%S"</span>)</span>
<span id="cb7-260"><a href="#cb7-260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-261"><a href="#cb7-261" aria-hidden="true" tabindex="-1"></a><span class="co"># Use GameDate to create a TournamentRound variable</span></span>
<span id="cb7-262"><a href="#cb7-262" aria-hidden="true" tabindex="-1"></a>DateRoundTeam <span class="ot">&lt;-</span> DateAndTeam <span class="sc">%&gt;%</span></span>
<span id="cb7-263"><a href="#cb7-263" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TournamentRound =</span> <span class="fu">case_when</span>(</span>
<span id="cb7-264"><a href="#cb7-264" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">&gt;=</span> <span class="st">"2023-03-14"</span> <span class="sc">&amp;</span> GameDate <span class="sc">&lt;=</span> <span class="st">"2023-03-15"</span> <span class="sc">~</span> <span class="st">"First 4"</span>, </span>
<span id="cb7-265"><a href="#cb7-265" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">&gt;=</span> <span class="st">"2023-03-16"</span> <span class="sc">&amp;</span> GameDate <span class="sc">&lt;=</span> <span class="st">"2023-03-17"</span> <span class="sc">~</span> <span class="st">"Round of 64"</span>,</span>
<span id="cb7-266"><a href="#cb7-266" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">&gt;=</span> <span class="st">"2023-03-18"</span> <span class="sc">&amp;</span> GameDate <span class="sc">&lt;=</span> <span class="st">"2023-03-19"</span> <span class="sc">~</span> <span class="st">"Round of 32"</span>,</span>
<span id="cb7-267"><a href="#cb7-267" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">&gt;=</span> <span class="st">"2023-03-23"</span> <span class="sc">&amp;</span> GameDate <span class="sc">&lt;=</span> <span class="st">"2023-03-24"</span> <span class="sc">~</span> <span class="st">"Sweet 16"</span>,</span>
<span id="cb7-268"><a href="#cb7-268" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">&gt;=</span> <span class="st">"2023-03-25"</span> <span class="sc">&amp;</span> GameDate <span class="sc">&lt;=</span> <span class="st">"2023-03-26"</span> <span class="sc">~</span> <span class="st">"Elite 8"</span>,</span>
<span id="cb7-269"><a href="#cb7-269" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">==</span> <span class="st">"2023-04-01"</span> <span class="sc">~</span> <span class="st">"Final 4"</span>,</span>
<span id="cb7-270"><a href="#cb7-270" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">==</span> <span class="st">"2023-04-03"</span> <span class="sc">~</span> <span class="st">"Championship"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb7-271"><a href="#cb7-271" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-272"><a href="#cb7-272" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace game start times with time categories</span></span>
<span id="cb7-273"><a href="#cb7-273" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Time =</span> <span class="fu">case_when</span>(</span>
<span id="cb7-274"><a href="#cb7-274" aria-hidden="true" tabindex="-1"></a>    Time <span class="sc">&gt;=</span> <span class="st">"12:00:00"</span> <span class="sc">&amp;</span> Time <span class="sc">&lt;</span> <span class="st">"14:14:59"</span> <span class="sc">~</span> <span class="st">"Early Afternoon"</span>,</span>
<span id="cb7-275"><a href="#cb7-275" aria-hidden="true" tabindex="-1"></a>    Time <span class="sc">&gt;=</span> <span class="st">"14:15:00"</span> <span class="sc">&amp;</span> Time <span class="sc">&lt;</span> <span class="st">"16:29:59"</span> <span class="sc">~</span> <span class="st">"Mid Afternoon"</span>,</span>
<span id="cb7-276"><a href="#cb7-276" aria-hidden="true" tabindex="-1"></a>    Time <span class="sc">&gt;=</span> <span class="st">"16:30:00"</span> <span class="sc">&amp;</span> Time <span class="sc">&lt;</span> <span class="st">"18:44:59"</span> <span class="sc">~</span> <span class="st">"Late Afternoon"</span>,</span>
<span id="cb7-277"><a href="#cb7-277" aria-hidden="true" tabindex="-1"></a>    Time <span class="sc">&gt;=</span> <span class="st">"18:45:00"</span> <span class="sc">&amp;</span> Time <span class="sc">&lt;</span> <span class="st">"20:59:59"</span> <span class="sc">~</span> <span class="st">"Early Evening"</span>,</span>
<span id="cb7-278"><a href="#cb7-278" aria-hidden="true" tabindex="-1"></a>    Time <span class="sc">&gt;=</span> <span class="st">"21:00:00"</span> <span class="sc">&amp;</span> Time <span class="sc">&lt;</span> <span class="st">"22:45:00"</span> <span class="sc">~</span> <span class="st">"Late Evening"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb7-279"><a href="#cb7-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-280"><a href="#cb7-280" aria-hidden="true" tabindex="-1"></a><span class="co"># Import game day volume</span></span>
<span id="cb7-281"><a href="#cb7-281" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">GDayVolCol =</span> <span class="fu">case_when</span>(</span>
<span id="cb7-282"><a href="#cb7-282" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">==</span> <span class="st">"2023-03-14"</span> <span class="sc">~</span> <span class="dv">74</span>, </span>
<span id="cb7-283"><a href="#cb7-283" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">==</span> <span class="st">"2023-03-15"</span> <span class="sc">~</span> <span class="dv">75</span>, </span>
<span id="cb7-284"><a href="#cb7-284" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">==</span> <span class="st">"2023-03-16"</span> <span class="sc">~</span> <span class="dv">76</span>,</span>
<span id="cb7-285"><a href="#cb7-285" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">==</span> <span class="st">"2023-03-17"</span> <span class="sc">~</span> <span class="dv">77</span>,</span>
<span id="cb7-286"><a href="#cb7-286" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">==</span> <span class="st">"2023-03-18"</span> <span class="sc">~</span> <span class="dv">78</span>,</span>
<span id="cb7-287"><a href="#cb7-287" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">==</span> <span class="st">"2023-03-19"</span> <span class="sc">~</span> <span class="dv">79</span>,</span>
<span id="cb7-288"><a href="#cb7-288" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">==</span> <span class="st">"2023-03-23"</span> <span class="sc">~</span> <span class="dv">83</span>,</span>
<span id="cb7-289"><a href="#cb7-289" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">==</span> <span class="st">"2023-03-24"</span> <span class="sc">~</span> <span class="dv">84</span>,</span>
<span id="cb7-290"><a href="#cb7-290" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">==</span> <span class="st">"2023-03-25"</span> <span class="sc">~</span> <span class="dv">85</span>,</span>
<span id="cb7-291"><a href="#cb7-291" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">==</span> <span class="st">"2023-03-26"</span> <span class="sc">~</span> <span class="dv">86</span>,</span>
<span id="cb7-292"><a href="#cb7-292" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">==</span> <span class="st">"2023-04-01"</span> <span class="sc">~</span> <span class="dv">92</span>,</span>
<span id="cb7-293"><a href="#cb7-293" aria-hidden="true" tabindex="-1"></a>      GameDate <span class="sc">==</span> <span class="st">"2023-04-03"</span> <span class="sc">~</span> <span class="dv">94</span></span>
<span id="cb7-294"><a href="#cb7-294" aria-hidden="true" tabindex="-1"></a>            )) <span class="sc">%&gt;%</span></span>
<span id="cb7-295"><a href="#cb7-295" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">School =</span> Team) <span class="sc">%&gt;%</span></span>
<span id="cb7-296"><a href="#cb7-296" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(School, GameDate, TournamentRound, Time, GDayVolCol, IsWinner, WinningSeed, LosingSeed)</span>
<span id="cb7-297"><a href="#cb7-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-298"><a href="#cb7-298" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function to bring in Game Day Volume </span></span>
<span id="cb7-299"><a href="#cb7-299" aria-hidden="true" tabindex="-1"></a>fun13 <span class="ot">&lt;-</span> <span class="cf">function</span>(row) {</span>
<span id="cb7-300"><a href="#cb7-300" aria-hidden="true" tabindex="-1"></a>  school <span class="ot">&lt;-</span> row[<span class="st">"School"</span>]  <span class="co"># Get the school name from the row</span></span>
<span id="cb7-301"><a href="#cb7-301" aria-hidden="true" tabindex="-1"></a>  column_index <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row[<span class="st">"GDayVolCol"</span>])  <span class="co"># Convert the value to a numeric column index</span></span>
<span id="cb7-302"><a href="#cb7-302" aria-hidden="true" tabindex="-1"></a>  value <span class="ot">&lt;-</span> MMVolumeVar[MMVolumeVar<span class="sc">$</span>School <span class="sc">==</span> school, column_index]</span>
<span id="cb7-303"><a href="#cb7-303" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">as.numeric</span>(value))</span>
<span id="cb7-304"><a href="#cb7-304" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-305"><a href="#cb7-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-306"><a href="#cb7-306" aria-hidden="true" tabindex="-1"></a><span class="co"># Return the flattened game day volume for each school</span></span>
<span id="cb7-307"><a href="#cb7-307" aria-hidden="true" tabindex="-1"></a>DateRoundTeam<span class="sc">$</span>GameDayVolume <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">apply</span>(DateRoundTeam, <span class="dv">1</span>, fun13))</span>
<span id="cb7-308"><a href="#cb7-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-309"><a href="#cb7-309" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data frame with School, GameDate, Time, TournamentRound, GameDayVolume, IsWinner, WinningSeed, LosingSeed</span></span>
<span id="cb7-310"><a href="#cb7-310" aria-hidden="true" tabindex="-1"></a>TVariables <span class="ot">&lt;-</span> DateRoundTeam <span class="sc">%&gt;%</span></span>
<span id="cb7-311"><a href="#cb7-311" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(TournamentVariables, <span class="at">by =</span> <span class="st">"School"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-312"><a href="#cb7-312" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(School, GameDate, Time, TournamentRound, GameDayVolume, IsWinner, WinningSeed, LosingSeed)</span>
<span id="cb7-313"><a href="#cb7-313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-314"><a href="#cb7-314" aria-hidden="true" tabindex="-1"></a><span class="co"># Mutate WinningSeed and LosingSeed to create IsFavorite column </span></span>
<span id="cb7-315"><a href="#cb7-315" aria-hidden="true" tabindex="-1"></a>TVariables2 <span class="ot">&lt;-</span> TVariables <span class="sc">%&gt;%</span></span>
<span id="cb7-316"><a href="#cb7-316" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">SeedDifference =</span> <span class="fu">ifelse</span>(IsWinner <span class="sc">==</span> <span class="st">"Yes"</span>, WinningSeed <span class="sc">-</span> LosingSeed, LosingSeed <span class="sc">-</span> WinningSeed)) <span class="sc">%&gt;%</span></span>
<span id="cb7-317"><a href="#cb7-317" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">SeedDifference =</span> <span class="fu">abs</span>(SeedDifference)) <span class="sc">%&gt;%</span></span>
<span id="cb7-318"><a href="#cb7-318" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Upset =</span> <span class="fu">ifelse</span>(SeedDifference <span class="sc">&gt;=</span> <span class="dv">5</span>, <span class="st">"Yes"</span>, <span class="st">"No"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb7-319"><a href="#cb7-319" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">IsFavorite =</span> <span class="fu">ifelse</span>((IsWinner <span class="sc">==</span> <span class="st">"Yes"</span> <span class="sc">&amp;</span> WinningSeed <span class="sc">&gt;</span> LosingSeed) <span class="sc">|</span></span>
<span id="cb7-320"><a href="#cb7-320" aria-hidden="true" tabindex="-1"></a>                             (IsWinner <span class="sc">==</span> <span class="st">"No"</span> <span class="sc">&amp;</span> LosingSeed <span class="sc">&gt;</span> WinningSeed), <span class="st">"Favorite"</span>,</span>
<span id="cb7-321"><a href="#cb7-321" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">ifelse</span>(WinningSeed <span class="sc">==</span> LosingSeed, <span class="cn">NA</span>, <span class="st">"Underdog"</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb7-322"><a href="#cb7-322" aria-hidden="true" tabindex="-1"></a> <span class="fu">mutate</span>(<span class="at">FavoriteWin =</span> <span class="fu">ifelse</span>(IsFavorite <span class="sc">==</span> <span class="st">"Yes"</span> <span class="sc">&amp;</span> IsWinner <span class="sc">==</span> <span class="st">"Yes"</span>, <span class="st">"Yes"</span>, <span class="st">"No"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb7-323"><a href="#cb7-323" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">UnderdogWin =</span> <span class="fu">ifelse</span>(IsFavorite <span class="sc">==</span> <span class="st">"No"</span> <span class="sc">&amp;</span> IsWinner <span class="sc">==</span> <span class="st">"Yes"</span>, <span class="st">"Yes"</span>, <span class="st">"No"</span>))</span>
<span id="cb7-324"><a href="#cb7-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-325"><a href="#cb7-325" aria-hidden="true" tabindex="-1"></a>TVariables3 <span class="ot">&lt;-</span> TVariables2 <span class="sc">%&gt;%</span></span>
<span id="cb7-326"><a href="#cb7-326" aria-hidden="true" tabindex="-1"></a>   <span class="fu">select</span>(School, GameDate, Time, TournamentRound, GameDayVolume, IsFavorite, IsWinner, Upset, FavoriteWin, UnderdogWin)</span>
<span id="cb7-327"><a href="#cb7-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-328"><a href="#cb7-328" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in data for enrollment </span></span>
<span id="cb7-329"><a href="#cb7-329" aria-hidden="true" tabindex="-1"></a>SchoolNameToSchool <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"_data/SchoolNameToSchool.csv"</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>) </span>
<span id="cb7-330"><a href="#cb7-330" aria-hidden="true" tabindex="-1"></a>EnrollmentData <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"_data/CCIHE2021PublicData.csv"</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb7-331"><a href="#cb7-331" aria-hidden="true" tabindex="-1"></a>SchoolEnrollmentData <span class="ot">&lt;-</span> SchoolNameToSchool <span class="sc">%&gt;%</span></span>
<span id="cb7-332"><a href="#cb7-332" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(EnrollmentData, <span class="at">by =</span> <span class="st">"SchoolName"</span>)</span>
<span id="cb7-333"><a href="#cb7-333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-334"><a href="#cb7-334" aria-hidden="true" tabindex="-1"></a><span class="co"># Add School Size data to TVariables3</span></span>
<span id="cb7-335"><a href="#cb7-335" aria-hidden="true" tabindex="-1"></a>TVariables4 <span class="ot">&lt;-</span> TVariables3 <span class="sc">%&gt;%</span></span>
<span id="cb7-336"><a href="#cb7-336" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(SchoolEnrollmentData, <span class="at">by =</span> <span class="st">"School"</span>)</span>
<span id="cb7-337"><a href="#cb7-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-338"><a href="#cb7-338" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in Is Major Variable</span></span>
<span id="cb7-339"><a href="#cb7-339" aria-hidden="true" tabindex="-1"></a>DateRoundTeamSeedMajor <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"_data/DateRoundTeamSeedMajor.csv"</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-340"><a href="#cb7-340" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(School, Major)</span>
<span id="cb7-341"><a href="#cb7-341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-342"><a href="#cb7-342" aria-hidden="true" tabindex="-1"></a><span class="co"># Add Is Major to TVariables4</span></span>
<span id="cb7-343"><a href="#cb7-343" aria-hidden="true" tabindex="-1"></a>TVariables4 <span class="ot">&lt;-</span> TVariables4 <span class="sc">%&gt;%</span></span>
<span id="cb7-344"><a href="#cb7-344" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(DateRoundTeamSeedMajor, <span class="at">by =</span> <span class="st">"School"</span>, <span class="at">relationship =</span></span>
<span id="cb7-345"><a href="#cb7-345" aria-hidden="true" tabindex="-1"></a>  <span class="st">"many-to-many"</span>) </span>
<span id="cb7-346"><a href="#cb7-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-347"><a href="#cb7-347" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data frame with all variables </span></span>
<span id="cb7-348"><a href="#cb7-348" aria-hidden="true" tabindex="-1"></a>VolumeFull <span class="ot">&lt;-</span> TVariables4 <span class="sc">%&gt;%</span></span>
<span id="cb7-349"><a href="#cb7-349" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(MMVolAvgs, <span class="at">by =</span> <span class="st">"School"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-350"><a href="#cb7-350" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>SchoolName)</span>
<span id="cb7-351"><a href="#cb7-351" aria-hidden="true" tabindex="-1"></a>VolumeFull</span>
<span id="cb7-352"><a href="#cb7-352" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb7-353"><a href="#cb7-353" aria-hidden="true" tabindex="-1"></a>I now have a data frame with all of my variables of interest. </span>
<span id="cb7-354"><a href="#cb7-354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-355"><a href="#cb7-355" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Create variables for diffences in average volume/volume</span></span>
<span id="cb7-356"><a href="#cb7-356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-357"><a href="#cb7-357" aria-hidden="true" tabindex="-1"></a>Solely comparing differences in volume between the schools is not helpful because their baselines are very different; a 1,000 mention increase for a school that typically receives 10 mentions per day is very different than a school that typically receives 1,000. </span>
<span id="cb7-358"><a href="#cb7-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-359"><a href="#cb7-359" aria-hidden="true" tabindex="-1"></a>Accordingly, I will transform volume metrics into percentage differences so that I can better compare the impact of March Madness across the different schools. </span>
<span id="cb7-360"><a href="#cb7-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-363"><a href="#cb7-363" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb7-364"><a href="#cb7-364" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate difference between average volume during tournament and non-tournament</span></span>
<span id="cb7-365"><a href="#cb7-365" aria-hidden="true" tabindex="-1"></a>MMVolDiffs <span class="ot">&lt;-</span> MMVolAvgs <span class="sc">%&gt;%</span></span>
<span id="cb7-366"><a href="#cb7-366" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-367"><a href="#cb7-367" aria-hidden="true" tabindex="-1"></a>    <span class="at">InTournamentDifference =</span> <span class="fu">round</span>(((VolDuring <span class="sc">/</span> VolNonTourn) <span class="sc">*</span> <span class="dv">100</span>), <span class="at">digits =</span> <span class="dv">2</span>),</span>
<span id="cb7-368"><a href="#cb7-368" aria-hidden="true" tabindex="-1"></a>    <span class="at">DayPostElimDifference =</span> <span class="fu">round</span>(((VolPostElim <span class="sc">/</span> VolNonTourn) <span class="sc">*</span> <span class="dv">100</span>), <span class="at">digits =</span> <span class="dv">2</span>),</span>
<span id="cb7-369"><a href="#cb7-369" aria-hidden="true" tabindex="-1"></a>    <span class="at">ElimPlus1Difference =</span> <span class="fu">round</span>(((VolPostElim1 <span class="sc">/</span> VolNonTourn) <span class="sc">*</span> <span class="dv">100</span>), <span class="at">digits =</span> <span class="dv">2</span>),</span>
<span id="cb7-370"><a href="#cb7-370" aria-hidden="true" tabindex="-1"></a>    <span class="at">ElimPlus2Difference =</span> <span class="fu">round</span>(((VolPostElim2 <span class="sc">/</span> VolNonTourn) <span class="sc">*</span> <span class="dv">100</span>), <span class="at">digits =</span> <span class="dv">2</span>), </span>
<span id="cb7-371"><a href="#cb7-371" aria-hidden="true" tabindex="-1"></a>    <span class="at">ElimPlus3Difference =</span> <span class="fu">round</span>(((VolPostElim3 <span class="sc">/</span> VolNonTourn) <span class="sc">*</span> <span class="dv">100</span>), <span class="at">digits =</span> <span class="dv">2</span>),</span>
<span id="cb7-372"><a href="#cb7-372" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb7-373"><a href="#cb7-373" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(School, InTournamentDifference, DayPostElimDifference, ElimPlus1Difference, ElimPlus2Difference, ElimPlus3Difference)</span>
<span id="cb7-374"><a href="#cb7-374" aria-hidden="true" tabindex="-1"></a>MMVolDiffs</span>
<span id="cb7-375"><a href="#cb7-375" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb7-376"><a href="#cb7-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-377"><a href="#cb7-377" aria-hidden="true" tabindex="-1"></a>:::</span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>